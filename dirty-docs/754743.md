+--------------------------------------------------------------------------+
<div class="pageheader">

<span class="pagetitle"> SmartOS Documentation : How do I obtain a
system crash dump via IPMI? </span>

</div>

<div class="pagesubheading">

This page last changed on Apr 29, 2019 by
<font color="#0050B2">rejohnst</font>.

</div>

Assuming
[IPMI](http://en.wikipedia.org/wiki/Intelligent_Platform_Management_Inte
rface) has
been configured, it's possible to get Illumos systems to generate a
sytem crash dump by sending the host a  NMI
([non-maskable interrupt)](http://en.wikipedia.org/wiki/Non-maskable_int
errupt)
via IPMI. To send an NMI first obtain ipmitool from its
[website](http://ipmitool.sourceforge.net/).  Then issue the following
command:

<div class="code panel" style="border-width: 1px;">

<div class="codeContent panelContent">

<div id="root">

``` {.theme: .Confluence; .brush: .bash; .gutter: .false}
$ ipmitool -I lanplus -H <hostname> -U <username> -P <passwd> chassis po
wer diag
```

</div>

</div>

</div>

Once receiving the NMI, the crash dump will be written to `/var/crash`
and the system will reboot. Please contact Joyent support (if you are a
customer) or engineering via the Freenode IRC channel \#smartos or the
smartos-discuss mailing list, as they'll likely be interested in taking
a look at the dump.

<div class="tabletitle">


Comments:
---------

</a>

</div>

+-----------------------------------------------------------------------
---+
|  <font class="smallfont">
   |
| Does this require IPMI capable hardware? Or does the SmartOS image hav
e  |
| some sort of underlying software-based IPMI layer? Sorry for the novic
e  |
| question. I do have couple supermicro systems with IPMI and just havin
g  |
| remote KVM/power/ISO-mounting is great. Unfortunately, the board I'm
   |
| using for SmartOS doesn't have IPMI.
   |
|
   |
| </font>
   |
| <div class="smallfont" align="left"
   |
| style="color: #666666; width: 98%; margin-bottom: 10px;">
   |
|
   |
| ![](images/icons/comment_16.gif){width="16" height="16"} Posted by
   |
| ahayes@polkaroo.net at Feb 22, 2012 16:47
   |
|
   |
| </div>
   |
+-----------------------------------------------------------------------
---+
|  <font class="smallfont">
   |
| I'm pretty sure you need a system with a BMC that supports IPMI.
   |
|  There's probably a way triggering a crash dump via serial or some oth
er |
| method.  The mailing list is the right place to ask about these things
.  |
|
   |
| </font>
   |
| <div class="smallfont" align="left"
   |
| style="color: #666666; width: 98%; margin-bottom: 10px;">
   |
|
   |
| ![](images/icons/comment_16.gif){width="16" height="16"} Posted by
   |
| gflarity at Feb 22, 2012 18:23
   |
|
   |
| </div>
   |
+-----------------------------------------------------------------------
---+
+--------------------------------------------------------------------------+

  ----------------------------------------------------------------------------------
  ![](images/border/spacer.gif){width="1" height="1"}
  <font color="grey">Document generated by Confluence on Jul 07, 2019 00:15</font>
  ----------------------------------------------------------------------------------


