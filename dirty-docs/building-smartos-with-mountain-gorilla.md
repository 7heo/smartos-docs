+--------------------------------------------------------------------------+
<div class="pageheader">

<span class="pagetitle"> SmartOS Documentation : Building SmartOS with
Mountain Gorilla </span>

</div>

<div class="pagesubheading">

This page last changed on Dec 14, 2014 by
<font color="#0050B2">nahamu</font>.

</div>

<div>

<ul>
<li>
[Setup](#BuildingSmartOSwithMountainGorilla-Setup)
</li>
<li>
[Building SmartOS](#BuildingSmartOSwithMountainGorilla-BuildingSmartOS)
</li>
- [Building a release
    branch](#BuildingSmartOSwithMountainGorilla-Buildingareleasebranch)
- [Mixing
    branches](#BuildingSmartOSwithMountainGorilla-Mixingbranches)

</ul>

</div>

Setup
=========

Joyent run their Jenkins slaves using the root user, so that's what I'll
do here.

Create zone as normal (See [Building SmartOS on
SmartOS](Building%20SmartOS%20on%20SmartOS.html "Building SmartOS on Sma
rtOS")),
but use a 30GB quota just to be safe on disk...

Set up SSH keys for at least github and ideally Manta too (or access it
over SSH with ssh-agent forwarding).

Get Mountain Gorilla Ready:

<div class="code panel" style="border-width: 1px;">

<div class="codeContent panelContent">

<div id="root">

``` {.theme: .Confluence; .brush: .java; .gutter: .false}
pkgin -y in scmgit gmake gcc47
git clone git@github.com:joyent/mountain-gorilla.git MG
cp MG/tools/jenkins-build ./
```

</div>

</div>

</div>

Building SmartOS
====================

To build the latest master branches of SmartOS:

<div class="code panel" style="border-width: 1px;">

<div class="codeContent panelContent">

<div id="root">

``` {.theme: .Confluence; .brush: .java; .gutter: .false}
export JOYENT_BUILD="false"
export JOB_NAME="smartos"
./jenkins-build
```

</div>

</div>

</div>

Building a release branch
-----------------------------

To rebuild a particular release:

<div class="code panel" style="border-width: 1px;">

<div class="codeContent panelContent">

<div id="root">

``` {.theme: .Confluence; .brush: .java; .gutter: .false}
export JOYENT_BUILD="false"
export JOB_NAME="smartos"
BRANCH=release-20141211 ./jenkins-build
```

</div>

</div>

</div>

Mixing branches
-------------------

Read the jenkins-build script (See
<https://github.com/joyent/mountain-gorilla/blob/master/tools/jenkins-bu
ild#L42-53>)
for full instructions on how to specify which branch(es) to build.
+--------------------------------------------------------------------------+

  ----------------------------------------------------------------------------------
  ![](images/border/spacer.gif){width="1" height="1"}
  <font color="grey">Document generated by Confluence on Jul 07, 2019 00:15</font>
  ----------------------------------------------------------------------------------


