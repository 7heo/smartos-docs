+--------------------------------------------------------------------------+
<div class="pageheader">

<span class="pagetitle"> SmartOS Documentation : SmartOS Change Log
</span>

</div>

<div class="pagesubheading">

This page last changed on Jul 08, 2016 by
<font color="#0050B2">brian.bennett@joyent.com</font>.

</div>

### Download [here](Download%20SmartOS.html "Download SmartOS").

Changelogs have moved.
==========================

### 

### See the autogenerated changelogs [directly in Manta (requires ja
vascript)](http://us-east.manta.joyent.com/Joyent_Dev/public/SmartOS/sma
rtos.html) and watch for build flag day announcements and other major fe
ature releases on the [smartos-discuss mailing list](Mailing%20Lists%20a
nd%20IRC.html "Mailing Lists and IRC").

September 19, 2013
----------------------

smartos-live\
--------

OS-2483 catman generation copies linked pages\
OS-2497 remove use of system.getProvisionableMemory() leaving decisions
about space reservation to caller or something else upstack.\
OS-2487: 'imgadm import' rollback shouldn't complain about not being
able to delete -partial dataset\
OS-2383 want support for HP/Compaq SmartArray controllers\
OS-2494 need node-libuuid module in the platform\
FWAPI-75: fwadm: list remote VMs\
FWAPI-82: fwadm: want --owner\_uuid option; fwadm now outputs which
remote VMs were added or updated.\
OS-2488 incremental imgadm create should bork if no @final snapshot on
the origin image\
ZAPI-404 add tests to ensure snapshots working w/ SNGL\
'make check'\
OS-2489: imgadm create must fail on 'zfs send' error\
OS-2491 fix race condition between zfs set {compression,refreservation}
and zfs list in VM.js\
OS-2400: occassional 'HashUpdate fail' in 'imgadm create ...'\
OS-2485 configure is missing pkg\_alternatives\
OS-2482 add support for sdc:operator-script which will pull from
internal\_metadataoperator-script

illumos\
-~~-~~----

OS-2502 illumos-joyent manifest should be sorted\
4122 do\_sysfile\_cmd colon-separates the module path, and then we can't
parse it\
3789 iscsid disables warnings\
1770 3libucb and 3ucb manpages are 6 years behind reality\
OS-2383 want support for HP/Compaq SmartArray controllers\
1601 date command should support +%N\
4023 Properly escape newlines and carriage returns in man pages\
4078 groupadd execs getent unnecessarily\
4127 dmake setup could create /etc/skel\
3737 grep does not support -H option\
3759 egrep(1) and fgrep(1) -s flag does not hide -c output\
3806 illumos build execs echo unnecessarily\
4020 Make ldi\_ev\_remove\_callbacks safe to use in LDI callbacks\
4099 SMF methods without absolute paths no longer work\
OS-2469 missing fm driver prevents all CPU and memory diagnosis on all
HW\
4111 wcwidth() still not right for some characters

illumos-extra\
--------

kvm\
--------

kvm-cmd\
--------

HVM-782 want walkers for various bits of nic state

September 09, 2013
----------------------

smartos-live\
--------

OS-2456 sd timeout/retry settings are absurd\
OS-2457 mptsas timeout subsystem needs finer granularity\
3600 edit(1) is a bad .so reference (fix merge cruft)\
OS-2474: If we get an error trying to create the zone socket, back-off
and retry a few seconds later.\
OS-2479 the ramdisk must grow to accommodate gdamore's locales\
OS-2465 'imgadm create' should clean up its '@final' snapshot on the
dataset on failure\
OS-2466 'imgadm create' should not fail on an existing '@final' snapshot
on the VM\
OS-2453 only call callback once when there's an error posting to
vmadmd.\
OS-2426 return an error when vmadm is unable to talk to vmadmd.\
FWAPI-72: fw.js: need to determine if remote VMs are the target of rules

illumos\
--------

OS-2437 arc\_get\_data\_buf() blocks in vmem\_alloc() instead of
evicting\
OS-2432 tail -f/-F missing some truncation events\
OS-2433 tail -f/-F can produce duplicate output after a truncation\
OS-2456 sd timeout/retry settings are absurd\
3600 edit(1) is a bad .so reference (fix merge cruft)\
2408 CJK character width handled incorrectly in terminal emulators
(missing widths-2.txt)\
2408 CJK character width handled incorrectly in terminal emulators\
3019 localedef(1) manpage is pretty out of date\
672 xargs doesn't support -0\
3356 xargs needlessly duplicates stdio buffering\
4075 nscd spuriously thinks all databases are privileged\
3965 find does not support -delete option\
3933 contract adoption can race\
1974 pages\_pp\_maximum/lotsfree discrepancy leads to mlock() failure\
4072 make clobber leaves trash\
3600 edit(1) is a bad .so reference\
4082 zfs receive gets EFBIG from dmu\_tx\_hold\_free()\
3954 metaslabs continue to load even after hitting
zfs\_mg\_alloc\_failure limit\
4080 zpool clear fails to clear pool\
4081 need zfs\_mg\_noalloc\_threshold\
4049 filesystem(5) documents /usr/bin/amd64 twice\
4048 cpu\_acpi is too verbose about disabled SpeedStep/PowerNow!
support\
OS-2463 restore zone-based zfs scheduling, based on new behavior\
OS-2444 richmond hardware maps need to support ivy bridge\
195 Need replacement for nfs/lockd+klm (exception\_lists)\
3946 ::gcore (fix sparc build)\
3518 Incorrect hostid calculation\
195 Need replacement for nfs/lockd+klm\
4045 zfs write throttle & i/o scheduler performance work\
3845 beadm doesn't work in non-global zones\
4054 dis sometimes decides random symbols are functions\
3194 dis crashes disassembling aes\
2932 support crash dumps to raidz, etc. pools (fix mismerge)\
OS-2450 libproc assertion failure\
1765 assert triggered in libzfs\_import.c trying to import pool name
beginning with a number\
2932 support crash dumps to raidz, etc. pools\
3785 Implement MAP\_32BIT flag to mmap()\
OS-2417 fix multi-vdev crash dump feature enabling\
4046 dsl\_dataset\_t ds\_dir-&gt;dd\_lock is highly contended\
3974 mistake on stdlib.h

illumos-extra\
--------

kvm\
--------

kvm-cmd\
--------

August 08, 2013
-------------------

smartos-live\
--------

FWAPI-43: No man page for fwadm\
OS-2403 'imgadm create --publish ...' passes incorrect path to the
publish subcmd if compression is used\
OS-2401 imgadm support for incremental images (missing file from
manifest)\
OS-2401 imgadm support for incremental images\
OS-1920 src/img/lib/imgadm.js "\_installImage" is a beast, refactor\
OS-2397 mkisofs breaks when LANG set to UTF-8 locale

illumos\
--------

3956 ::vdev -r should work with pipelines\
3957 ztest should update the cachefile before killing itself\
3958 multiple scans can lead to partial resilvering\
3959 ddt entries are not always resilvered\
3960 dsl\_scan can skip over dedup-ed blocks if physical birth !=
logical birth\
3961 freed gang blocks are not resilvered and can cause pool to suspend\
3962 ztest should print out zfs debug buffer before exiting\
3955 ztest failure: assertion
refcount\_count(&tx-&gt;tx\_space\_written) + delta &lt;=
tx-&gt;tx\_space\_towrite\
3949 ztest fault injection should avoid resilvering devices\
3950 ztest: deadman fires when we're doing a scan\
3951 ztest hang when running dedup test\
3952 ztest: ztest\_reguid test and ztest\_fault\_inject don't place nice
together\
backout 6910752/6968206: needs more work\
3992 mdb ::stacks segv\
3966 zfs lz4 compression (etc) should have bumped grub capability
VERSION\
3925 IP DCE does not scale (fix sparc)\
3973 zfs\_ioc\_rename alters passed in zc-&gt;zc\_name\
3925 IP DCE does not scale\
3972 ps - missing column separator\
3988 kstat(1) woefully inefficient on fully specified kstats\
3916 elfcore() can induce panic in bcopy()\
3923 Users should be able to lower nice value of processes within a
zone\
3924 privileges.5 man page missing PRIV\_SYS\_RES\_BIND\
3935 timer\_settime() for a one-shot should use cyclic\_reprogram()\
3936 cyclic\_remove\_here() blocked with cyp\_rpend of UINT32\_MAX\
3937 cyclic processing fails when cy\_pend is greater than INT32\_MAX\
3967 iconv() blows up when passed (iconv\_t)-1\
OS-2409 \_init alignment from crti.s needs work\
3735 should include an empty make variable in the default
CFLAGS/CCFLAGS\
3844 the build should make source-level debugging easier\
3922 libkvm/mdb should be able to extract symbols from crash dump\
3953 Calling ::list without specifying the name of the next member
causes mdb to core dump\
3926 multiple extern map file definitions corrupt symbol table entry\
3917 panic in turnstile\_block() on unowned mutex\
OS-2408 iconv() blows up when passed (iconv\_t)-1\
backout OS-2409 \_init alignment from crti.s needs work (missing crtn)\
3942 inject sanity into ipadm tcp buffer size properties\
3943 \_snd\_lowat\_fraction tcp tunable has no effect\
3939 parent rn\_lock being held across calls to rc\_hold\
OS-2409 \_init alignment from crti.s needs work\
3918 "pargs -l" dies on incomplete core dumps\
3919 mdb/pmap should show unresolved map names on core dumps\
3920 executable mapping in core dump misreported when file isn't found\
3921 Pfindexec() finds wrong binary, wreaking havoc\
348 ZFS should handle DKIOCGMEDIAINFOEXT failure\
3902 Race between ipmi\_submit\_driver\_request() and kcs\_loop()\
3882 Remove xmod & friends (fix sparc)\
3909 "zfs send -D" does not work\
3834 incremental replication of 'holey' file systems is slow\
3888 zfs recv -F should destroy any snapshots created since the
incremental source\
3934 project reference count leak in tasksys\_settaskid()\
OS-2366 ddi\_periodic\_add(9F) is entirely rubbish\
STOR-111 RAID-Z crash dump improvements from code review comments\
3778 1000BASE-LX support in ixgbe\
3856 want FW config version number for igb and ixgbe\
3913 there is no dialup, only zuul\
3894 zfs should not allow snapshot of inconsistent dataset\
3875 panic in zfs\_root() after failed rollback\
3706 mdb segfault when random address is passed to "list" walker\
3911 mdb is unable to display recursive stack\
1986 libima misuses gethostname\
OS-2288 there is no dialup, only zuul

illumos-extra\
--------

OS-2412 64-bit iconv modules should match 32-bit

kvm\
--------

kvm-cmd\
--------

July 25, 2013
-----------------

smartos-live\
--------

smartos-live\#238 Global zone lacks svc:/network/nfs/mapid:default\
FWAPI-71: "fwadm vms" throws an error when rule references an unknown
VM\
OS-2387 Bump DEFAULT\_MAXPID to 99999\
joyent/smartos-live\#239: nictagadm doesn't properly handle comments in
config file\
FWAPI-68: fwadm: want to be able to find VMs affected by a rule\
FWAPI-56: Remove accidentally checked-in binary\
FWAPI-56: Add microtime to node\_modules\
FWAPI-69: fw.js: expose function for getting remote rule targets\
FWAPI-56 Add node-microtime (0.3.3)
9bbd4002c3b3c5ba246810feae37bd69352383f6\
smartos-live\#238 Global zone lacks svc:/network/nfs/mapid:default\
OS-2393 crtn was not properly updated for the crti changes\
OS-2392 i386 ctri.s does not provide proper stack alignment\
OS-2387 Bump DEFAULT\_MAXPID to 99999\
OS-2386 Pfindexec() finds wrong binary, wreaking havoc\
3895 {tcp,udp}\_{largest,smallest}\_anon\_port should reality-check\
3869 tcp anon port calculation wrong\
OS-2345 panic in zfs\_root() due to NULL z\_os (fix refcnt)\
OS-2378 OS-2358 fix causes snapshot -r to fail during recv\
3893 lvm: incorrect flag handling\
OS-2377 Make zfs-io-priority 0 mean that zone isn't subject to I/O
throttling\
OS-2345 panic in zfs\_root() due to NULL z\_os\
3853 \_\_cplusplus change and headers incompatipility with clang\
3849 implement \_*cxa\_atexit/*\_cxa\_finalize\
3887 Enlarge data buffer in digest/mac to boost performance\
OS-2373 elfcore() can induce panic in bcopy()\
3877 fast reboot does not work with extended partition\
OS-2371 push for OS-2271 omitted two files

illumos-extra\
--------

OS-2390 illumos-extra g11n build breaks if MAKE is set

kvm\
--------

kvm-cmd\
--------

July 11, 2013
-----------------

smartos-live\
--------

OS-2363 use existing disk\_driver or nic\_driver values on update when
available.\
OS-2363 keep disk\_driver and nic\_driver properties and use .model from
first disk/nic if missing.\
OS-2295 Users should be able to lower nice value of processes within a
zone.\
OS-2346 bump ringbuffer messages to 512 to help track down problems.\
OS-2357 fix vmadm lookup when no -j and -o to not lookup attributes it
doesn't need.\
OS-2353 add support for mounting /checkpoints for joyent and
joyent-minimal\
OS-2323 hang in 'imgadm import ... IMAGE-UUID'\
IMGAPI-95: imgadm create & imgadm publish (for non-KVM images and VMs)\
OS-2349 /etc/profile executes /usr/sbin/quota, which is O(mountpoints)\
OS-2284 fix vmadm deletion of non-existent VM

illumos\
--------

3839 AHCI: WARNINGs should be replaced by ASSERTs\
3878 blkdev needs to support DKIOCGMEDIAINFOEXT\
OS-2368 freed zombie sdev\_node still in directory cache\
OS-2369 sdev\_shadow\_node slept through a vn\_rele\
OS-2356 mdb should support embedded dmods in core dumps\
OS-2295 Users should be able to lower nice value of processes within a
zone.\
OS-2367 privileges.5 man page missing PRIV\_SYS\_RES\_BIND\
OS-2312 cron ran the same task twice at the same time\
3866 panic in idm module\
3867 stmfCreateLu failed: GUID\_IN\_USE\
3868 iscsi target not accepting any new connections\
OS-2359 svc.startd dies in utmpx\_postfork()\
3862 stmf + kstat = kernel panic\
3863 stmf\_itl\_task\_start() must check for ilu-&gt;ilu\_kstat\_io is
non-null\
3864 memory leak in the iSCSI code\
3861 tcp buffer size tunables for iscsi connections (fix sizeof calls)\
OS-2358 zfs should not allow snapshot of inconsistent dataset (fix
bogon)\
OS-2358 zfs should not allow snapshot of inconsistent dataset\
3809 Recent libc change breaks Solaris 10 Branded Zone Support\
3861 tcp buffer size tunables for iscsi connections\
3836 zio\_free() can be processed immediately in the common case\
3775 Upstreaming of ALUA use-after-free fixes from Nexenta\
OS-2351 zone boot crosscheck\_zonepaths is O(N\^2)\
OS-2328 zone boot failed: could not open master side of zone console\
OS-2349 /etc/profile executes /usr/sbin/quota, which is O(mountpoints)\
OS-2341 need a way to disable hsfs use in a zone\
OS-2350 zoneadmd stuck in sdev

illumos-extra\
--------

kvm\
--------

kvm-cmd\
--------

June 27, 2013
-----------------

smartos-live\
--------

OS-2346: vmadm crash on us-east-3 during update\
FWAPI-59: fwadm get should only output JSON\
NET-217: 4-space indents\
OS-2268 smartos-live configure misses some default packages\
OS-2344 configure should accept no for ILLUMOS\_ENABLE\_DEBUG\
OS-2332 filewait needs to wait if file's parent directory does not exist
when we start watching.\
OS-2325 Revert imgadm changes exacerbating this bug\
OS-2315 imgadm fails on images.joyent.com with SSL certificate failure\
OS-2314 fix path for metadata socket in zoneinit's 00-mdata.sh, and also
fix to using correct mdata:fetch start method so we have correct path
there too.\
OS-2324 "mdata-get sdc:datacenter\_name" returns no value\
IMGAPI-95: imgadm create & imgadm publish (for non-KVM images and VMs)\
HEAD-678: Need persistent IPF rules functionality in Headnode\
OS-1950: Need log rotation on /var/log/fw files\
OS-2307 '/lib/sdc/config.sh -json' should be fast when config hasn't
changed\
OS-2297: Add allowed\_ips to vmadm man page

illumos\
--------

OS-2350 zoneadmd stuck in sdev\
OS-1994 Missing various liblgrp manual pages\
OS-2338 ipmi driver wedged in kcs\_start\_write()\
OS-2342 panic in fop\_read on hyprlofs mountpoint\
OS-2317 ::typedef gets confused after defining an invalid type\
OS-2343 ::typedef -l shows anonymous structures\
3814 Support for SATA III\
3815 AHCI: Support for Marvell 88SE9128\
3820 /usr/bin/sed doesn't handle binary files.\
3837 Get rid of custom getln() implementation from whois.c\
3036 Update hwdata to current upstream data\
OS-2336 Include nicstat for network interface statistics\
OS-2318 cron doesn't have CTF\
OS-2333 would like a way to disable NFS client in zones\
3788 /etc/bootrc is defunct and should be removed\
2893 build\_osnet should go away\
OS-2320 common.ksh post\_unpack function doesn't support sparse zone
model\
3843 kstat should handle NULL string values\
3829 fix for 3740 changed behavior of zfs destroy/hold/release ioctl\
OS-1720 kstat -l shows **all** vnics on the host from a zone, info about
physical nics viewable, too\
3822 need getline() and getdelim() manual pages\
3832 AMD E721 workaround panics on KVM\
3828 The string(3c) man page needs restrict keyword for strtok\_r()\
3818 zpool status -x should report pools with removed l2arc devices\
OS-2271 'tail -F ...' not resetting the offset of file rotation
properly\
3787 gcc4.7 \_\_cplusplus change incompatibility\
3823 wchar.h and wctype\_iso.h incompatibility\
OS-2197 renaming dynamic sdev nodes leads to panic\
OS-2195 sdev dynamic directories can be created multiple times\
OS-2137 sdev vfs refcount assertion violation\
OS-2118 chmod 700 /dev/zcons/\* panics the box\
OS-2311 sdev could use some theory statements\
3691 setgroups() needs a sorted GID list for more than 16 groups\
3808 sulogin should reset console to text mode\
OS-2308 kstat(1) woefully inefficient on fully specified kstats

illumos-extra\
--------

kvm\
--------

kvm-cmd\
--------

HVM-778 ship qemu mdb module

June 13, 2013
-----------------

smartos-live\
--------

OS-2200 fix update of resolvers when no current resolvers. also fixes
'make check', tests and removes some cruft.\
OS-2297: vmadm: add allowed\_ips property for nics\
joyent/smartos-live\#223 imgadm should use progbar from npm\
OS-2304 metadata agent needs to reload if cache is stale when loading
sdc:resolvers and sdc:routes\
OS-2253 when rebooting many zones, mdata:fetch should not go into
maintenance\
OS-2289 make metadata agent files jsl and jsstyle clean\
OS-2290 switch metadata agent to bunyan logging\
OS-2291 cleanup objects for zone when zone deleted\
OS-2292 fix KEYS command to merge internal\_metadata creds w/
customer\_metadata keys\
OS-2293 upgrade node-zsock to latest upstream\
OS-2135 /etc/rtc\_config contains evil\
smartos-live\#227 netmask mistakingly required for non-admin network
dhcp\
OS-2257 unusable SSL libraries should have different names in the
platform\
TOOLS-184: fix intermittent net failures in VM test suite\
OS-2263: 'man vmadm' PROPERTIES section doesn't mention
"firewall\_enabled" prop/field\
OS-2277: Add network\_uuid field to nics\
OS-2275 fix reprovision when quota is 0 (none)\
OS-2274: 'imgadm avail' blows up with "Cannot read property 'length' of
undefined" if cannot reach one of the sources\
OS-2249: ipv4-forwarding service always enabled\
OS-2269 mdata:fetch should have dependency on system/rmtmpfiles\
OS-2266 keep quota across reprovision\
OS-2270 destroy old dataset with -r when reprovisioning\
OS-2158 add tests for reprovision\
OS-1963 / smartos-live\#135 fix vmadm recv for KVM VMs (thanks
MerlinDMC!).\
OS-1103 perform upgrade for old VMs to bring to {v: 1}\
OS-2261 / smartos-live\#219 fix KVM autoboot after reboot\
OS-2260 fix regression caused by OS-2059 which broke 'make check' on a
clean checkout on OS X.\
FWAPI-53: "too few args to sprintf" error when adding remote VMs with a
UUID matching a local VM

illumos\
--------

OS-2302 ipmi driver needs to coordinate access to the dev\_list\
OS-2303 illumos 3770 does not properly clean up in ipmi attach\
OS-2301 brand hooks should not be i18n\
3740 Poor ZFS send / receive performance due to snapshot hold / release
processing\
OS-2259 ixgbe failed callback message on console during boot\
OS-2239 ill\_frag\_hash\_tbl not allocated for loopback interfaces\
3749 zfs event processing should work on R/O root filesystems\
3747 txg commit callbacks don't work\
3745 zpool create should treat -O mountpoint and -m the same\
3811 zpool create -o altroot=/xyz -O mountpoint=/mnt ignores the
mountpoint option\
3744 zfs shouldn't ignore errors unmounting snapshots\
3743 zfs needs a refcount audit\
3742 zfs comments need cleaner, more consistent style\
3741 zfs needs better comments\
3797 AHCI: Support for ASMedia ASM106x\
3506 Use "hypervisor" CPUID bit to detect hypervisor environment\
3505 Creating LU unconditionally enables write cache on backing store
device\
3805 arc shouldn't cache freed blocks\
OS-2257 unusable SSL libraries should have different names in the
platform\
OS-2285 platform contains a few broken symlinks\
OS-2281 mdb\_v8 unable to print objects on 3.14.5.x\
OS-2280 zonememstat reports 0 rss for kvm-branded zones\
3799 ddi\_ffs(9f): typo in function prototype\
OS-2235 prstat -V swap summary is large compared to prstat -VZ\
OS-2249: ipv4-forwarding service always enabled\
3137 L2ARC compression\
3795 find does not support -path or -ipath\
3798 Typo in passwd(1) man page\
3664 pkg/Makefile openssl logic should be removed\
OS-2248: Do not enable network/routing/route if no default route is set

illumos-extra\
--------

OS-2286 lldpd doesn't understand datalinks\
OS-2287 lldpd's system name TLV is not recognised\
OS-2257 unusable SSL libraries should have different names in the
platform

kvm\
--------

kvm-cmd\
--------

May 30, 2013
----------------

smartos-live\
--------

OS-2225 don't expose internal\_metadata via 'sdc:internal\_metadata'
prefix.\
OS-2245: upgrade platform bunyan to 0.21.3 for \`bunyan -p \* -l
error\`\
3701 Chelsio Terminator 4 NIC driver for illumos\
FWAPI-51: add additional pass out fallback for icmp\
FWAPI-49: Do not require owner\_uuid for validating firewalls for VMs\
FWAPI-49: firewall payload validation failing due to missing VM data\
OS-2237 add zpool creation time to sysinfo\
OS-2234 / smartos-live\#215 switch default vga driver to 'std'

illumos\
--------

3680 Want a library to allow programatic access to the pci database (fix
sparc pkg)\
3701 Chelsio Terminator 4 NIC driver for illumos (fix sparc pkg)\
3676 dt\_print\_enum hardcodes a value of zero (fix sparc lint)\
OS-2229 panic in turnstile\_block() on unowned mutex\
3702 nfs4\_clnt.h: Typo pathhconf\
3751 ALUA mode: "/usr/demo/comstar/bin/aluaadm enable 1" sets "ALUA
Node" = 0\
3770 ipmi drivers hangs due to attach/detach/attach cycle\
OS-2185 nightly dmake check should look for the new dmake\
3699 zfs hold or release of a non-existent snapshot does not output
error\
3739 cannot set zfs quota or reservation on pool version &lt; 22\
3621 ZFS LU stuck in the offlining state\
3701 Chelsio Terminator 4 NIC driver for illumos\
3630 NFS server should not allocate oversized buffers\
3771 kmdb hangs when reading an invalid address\
3717 a README should explain libc's use of 'protected', the potential
existence of synonym symbols, etc.\
3769 Implement SOCK\_NONBLOCK flag to socket()\
2987 Add destination address to hash computation in mac fanout\
3713 Implement accept4() (fix lint)

illumos-extra\
--------

kvm\
--------

kvm-cmd\
--------

May 15, 2013
----------------

smartos-live\
--------

OS-2211: Set umask instead of chmod'ing, set metdata.sock smartdc
directory usable only by root\
OS-2224: imgadm "-E" option for machine parsable error\
OS-2213 switch metadata agent to using internal\_metadata for \*\_pw
keys to support older datasets.\
OS-2223 don't fail reprovision when /zones/&lt;uuid&gt;/cores is not
mounted.\
OS-2222 make reprovision more robust by forcing zfs renames and undoing
transition if we fail.\
OS-2218 'imgadm list' misses incremental images\
OS-2211: Change the default metadata sock permisisons.\
OS-2208 tools/customize should not chroot into the ramdisk\
FWAPI-47: "FROM any" should filter on destination port, not source\
OS-2201 build\_usb erroneously checks for mkisofs\
OS-2194 allow resolvers to be an empty array and in that case, write
resolv.conf with no 'nameserver' lines.\
OS-2154 use @final snapshot when exists for an image, but don't remove
@final when destroying VM

illumos\
--------

OS-2220 SOCK\_NONBLOCK is incomplete, breaks node\
OS-2170 want 64-bit v8 mdb dmod (add missing file)\
OS-2170 want 64-bit v8 mdb dmod\
OS-2190 libkvm/mdb should be able to extract symbols from crash dump\
OS-1983 tmpfs force unmount causes illegal VFS\_RELEs\
OS-2199 nss\_dns.so.1 returns no records found IPv4/6 is requested but
only v6 exists\
OS-2154 sngl brand should clone from @final when it exists.\
3713 Implement accept4()\
3714 Implement pipe2()\
3715 Implement dup3()\
3716 Implement mkostemp() and mkostemps()\
3719 so\_socketpair syscall should preserve FD\_CLOEXEC flag\
3722 link-editor is over restrictive of R\_AMD64\_32 addends

illumos-extra\
--------

OS-2215 curl uses LD\_LIBRARY\_PATH to the proto area\
OS-2207 openlldp should remove files before it installs

kvm\
--------

kvm-cmd\
--------

May 02, 2013
----------------

smartos-live\
--------

OS-2188 add vm\_logs name for vm logadm.conf entry, also bump to 1 week
of logs.\
OS-2187 add vm-version/v to vm objects so we can handle upgrades which
require updates to properties.\
OS-2184 fix reprovision regression.\
OS-2183 fix 'make check' cleanliness regression introduced by
IMGAPI-152.\
IMGAPI-152: rev imgadm to 2.0.3 for the @final change\
IMGAPI-152 imgadm should ensure that we always have an @final snapshot
of an imported dataset\
NET-203: Networks should support additional routes\
OS-2179: restart mdata:fetch on update that modifies one of the
properties mdata:fetch writes out\
OS-1808 change to -S 1g vs -s 100m since we have -b script to populate
the logs.\
OS-2175 have mdata:fetch write out new /etc/resolv.conf if required data
is in metadata.\
OS-1808 move VM.js logs to /var/log/vm/logs and rotate to
/var/log/vm/vm.log\
OS-2051 serial console login should set TERM appropriately\
OS-2172: fix typo causing undeclared var\
OS-2172: imgadm + source URL with hostname + GZ DNS changes + internal
DNS as first resolve.conf entry = broken\
OS-2116 dns in net/physical\
OS-2164 reprovision needs to run some of the commands from brand's
install script.\
OS-2161 want workaround for joyent/pkgsrc\#50\
HEAD-886 add experimental support for reprovisioning for some types of
VM.\
OS-2125 multilib: gcc package name has changed; configure is lost\
FWAPI-29: Should be able to target rules by tag\_name=value\
OS-2072 fix cases where disks.\*.image\_size was not passed but was
available from imgadm.

illumos\
--------

OS-2160 want FW config version number for igb and ixgbe\
OS-2186 ship pcitool\
OS-2178 cscope-fast clobber misses scanner.c\
OS-2115 /etc/resolv.conf only handles a fixed number of DNS resolvers
(fix debug)\
OS-2001 disk-monitor should activate fault/fail indicators (fix build)\
OS-2176 disk-lights broke the build\
OS-2169 need JCP-1102 topo map\
OS-2001 disk-monitor should activate fault/fail indicators\
OS-1965 need manpage for getline(3C), getdelim(3C)\
OS-2171 htonll and ntohll manual pages mistakingly checked in\
3705 stack overflow due to zfs lz4 compression\
OS-2128 a9ff841f brought in lint libraries, is out of order\
OS-2133 panic in mptsas\_restart\_hba()\
3642 dsl\_scan\_active() should not issue I/O to determine if async
destroying is active\
3643 txg\_delay should not hold the tc\_lock\
OS-2115 /etc/resolv.conf only handles a fixed number of DNS resolvers\
OS-2148 suspect nscd is not honoring DNS TTLs\
OS-2149 want getifaddrs manual page\
3724 kstat reports idle time as io\_wait, kernel as pio\_wait, etc\
3616 SHF\_GROUP sections should not be discarded via other COMDAT
mechanisms\
3709 need sloppy relocation for GNU .debug\_macro\
667 cp support for -a flag

illumos-extra\
--------

NET-209 want bidirectional LLDP facility\
OS-2177 perl uses dtrace -G with no probe sites\
OS-2173 libmakestate shenanigans are janky\
OS-2123 multilib: gcc can't install in parallel\
OS-2124 multilib: gcc needs to know that /opt/local/lib isn't in the
runpath\
OS-2156 handle curl CVE-2013-1944\
OS-2152 illumos-extra make prefix.patch confuses its arguements

kvm\
--------

kvm-cmd\
--------

HVM-774 qemu uses dtrace -G with no probe sites

Apr 18, 2013
----------------

smartos-live\
--------

OS-2109 make description of delegate\_dataset more clear where the
datatset will show up.\
OS-2120 cleaned up message formatting to indicate that uuids are VMs\
OS-2146 fix regression with 'vmadm lookup' without additional
arguments.\
OS-2143 use child\_process.spawn instead of child\_process.execFile to
prevent out of memory condition when loading many zones.\
OS-2144 add zonepath to fw\_fields list and prevent looping test on
error.\
joyent/smartos-live\#201 fix crash on 'vmadm lookup
disks.\*.model=virtio'\
OS-1989 VM.js should only load properties it needs to satisfy request.
Also adds 'vmadm lookup -j -o &lt;fields&gt;'.\
NET-204: Use the mounted USB config when the copy isn't available\
NET-204: netbooted nodes should be able to add / delete nic tags without
a reboot\
joyent/smartos-live\#161 NICs not persisting across reboots\
OS-2119 configure ought to run pkgin as root\
3500 Support LSI SAS2008 (Falcon) Skinny FW for mr\_sas(7D)\
OS-2060 /etc/release entries for components are out of date

illumos\
--------

OS-2150 project reference count leak in tasksys\_settaskid()\
3687 fopen() O\_CLOEXEC support via the "e" flag\
OS-2140 ::dtrace can yield no output\
OS-2139 need to ship libdtrace\_forceload.so\
OS-2131 dtrace(1M) should never create DOF with empty probes section\
OS-2122 Only probes from the first DTrace object file will be included\
3708 Fast reboot support in ixgbe\
3666 Implement SOCK\_CLOEXEC flag to socket()\
3673 core dumping is abysmally slow\
3671 left behind enemy lines, agent LWP can go rogue\
3670 add visibility into agent LWP's spymaster\
3679 prtconf should print out PCI database information\
3680 Want a library to allow programatic access to the pci database\
3668 add "%H" to mdb\_printf() for human-readable sizes (fix kmdb)\
OS-2132 mdb\_printf()'s "%H" must not use floating point under \_KMDB\
3674 onbld Checks should not query opensolaris.org\
3645 dmu\_send\_impl: possibilty of pool hold leak\
3692 Panic on zfs receive of a recursive deduplicated stream\
3668 add "%H" to mdb\_printf() for human-readable sizes\
OS-2113 multiple extern map file definitions corrupt symbol table entry\
3650 mdb global symbol tab completion should find all symbols\
3651 mdb\_readsym() and friends should find all symbols\
3652 convert ::spa and ::spa\_vdevs to use mdb\_ctf\_vread()\
3653 userland ::whatis always complains about "umem\_internal\_arena"
symbol\
3654 zdb should print number of ganged blocks\
3655 ::rrwlock and ::refcount print errors on non-debug kernels\
3656 remove unused function zap\_cursor\_move\_to\_key()\
3657 mdb\_ctf\_vread() should allow conversion of pointer to uintptr\_t\
3675 DTrace print() should try to resolve function pointers\
3676 dt\_print\_enum hardcodes a value of zero\
3677 /dev/ipnet can duplicate packets\
3683 pfiles shouldn't try to trace itself\
3684 pfiles crashes on processes with no files\
3685 getsockname should set the sa\_family\_t for unbound unix domain
sockets\
3686 pfiles shows incorrect socket information on some getsockname
calls\
3672 mac\_unregister does not clear mi\_dstaddr\_set\
3682 /usr/bin/head should implement -c -q and -v\
3500 Support LSI SAS2008 (Falcon) Skinny FW for mr\_sas(7D)

illumos-extra\
--------

OS-1886 apply libcurl sasl patch

kvm\
--------

kvm-cmd\
--------

Apr 04, 2013
----------------

smartos-live\
--------

OS-2086 smartos-live gmake clean misses proto.boot\
OS-2102 smartos-live should support generating pkgsrc packages\
OS-2103 Need packages for various build tools\
OS-2104 configure needs to install new smartos-live build packages\
OS-2105 missing a pkgin update can lead to weird behavior\
OS-2106 configure needs to point ON in the right direction\
OS-2061 make VM.start a NO-OP when the VM is already running.\
OS-2089 fix sysinfo man page wrt CPU cores.\
OS-920 VM.js should ensure paths are safe before accessing files in
zoneroot, and should avoid after zone is booted the first time.\
FWAPI-41: Allow tcp / udp "port all"\
FWAPI-40: CLI: Allow specifying the rule in command-line args\
FWAPI-39: All VMs need to allow pings from any by default\
FWAPI-35: ipf rules should more judicious in keeping state\
OS-2079 imgadm won't import from a DSAPI source: ActiveImageNotFound
error\
smartos-live\#190 Fix imgadm not importing from DSAPI sources\
smartos-live\#188 Fix handling of imgadm sources without leading
'http://'\
joyent/smartos-live\#190: 'imgadm update' broken\
FWAPI-30: wildcard filtering does not work

illumos\
--------

3665 Implement O\_CLOEXEC as an open() flag\
OS-2094 ON tools should honor \$MAKE\
OS-2095 cmd/refer Makefile is a bit bogus\
OS-2096 xref hardcodes its path\
OS-2097 lex should check \$origin for support files\
OS-2098 yacc should check \$origin for support files\
OS-2099 remove OS-1583 workaround\
OS-2100 ndmp makefiles need to use \$(RPCGEN)\
OS-2101 Need a way to specify ast binary directory\
918 Need better IP fanout (esp. with VLANs present)\
OS-2070 mdb\_v8 should autoconfigure based on DYNSYM, not SYMTAB\
OS-2071 executable mapping in core dump misreported when file isn't
found\
OS-2077 agent LWP evades detection from mdb\
3638 ld confuses files with group sections and files that should lazy
load\
3667 Allow ixgbe to use unsupported SFP modules\
OS-2075 ptime -p could support multiple processes\
OS-2084 left behind enemy lines, agent LWP can go rogue\
OS-2085 add visibility into agent LWP's spymaster\
OS-2081 GRUB console device help message needs to be more helpful\
3619 cp -p clobbers permissions/ownership following symbolic links\
3660 tcp\_slow\_start\_\* tunables should allow increasing the initial
congestion window\
OS-2083 Remove mDNS syslog spam\
OS-2076 grub corrupts stack while installing stage1.5\
OS-2069 elfdump should be 64-bit\
OS-2062 mdb/pmap should show unresolved map names on core dumps\
3639 zpool.cache should skip over readonly pools\
3640 want automatic devid updates\
3641 want a histogram of compressed block sizes\
joyent/illumos-extra\#9 OS-1588 breaks the build.\
OS-2064 dt\_print\_enum hardcodes a value of zero\
OS-2067 kmem\_cache\_create manual page uses \_fini instead of \_init\
OS-2068 mac\_unregister does not clear mi\_dstaddr\_set\
3618 ::zio dcmd does not show timestamp data

illumos-extra\
--------

OS-1972 ntp server check could be improved\
OS-2111 dmake not properly resetting conditoinal variables\
OS-2091 add open source dmake to illumos-extra\
OS-2092 illumos-extra components should use open source dmake\
OS-2093 illumos-extra components need to use pkgsrc sgstools\
joyent/illumos-extra\#9 OS-1588 breaks the build.\
OS-1901 lgrpinfo incorrectly shows DRAM information

kvm\
--------

kvm-cmd\
--------

Mar 21, 2013
----------------

smartos-live\
--------

OS-2059 smartos-live shouldn't pretend it supports building on OSX\
OS-2054 want platform to deliver GRUB in a separate bundle\
OS-2058 Missing /etc/driver\_aliases entry for arcmsr 17d3,1880\
OS-1970 Add support for the Areca 1882\
OS-2054 want platform to deliver GRUB in a separate bundle\
OS-2053 'imgadm install' has poor error message for missing required
opts\
IMGAPI-129 AddImageIcon "UploadError" details don't make it through to
the CLI\
OS-2037 illumos.sh needs to know the path to AR\
OS-2035 illumos configure should find elfdump, lorder, mcs, nm, strip,
and tsort in /usr\
OS-2030 upgrade to bunyan 0.20.0 which fixes regression.\
joyent/smartos-live\#183 disklayout (crash) / diskinfo (segfault)\
OS-2026 Don't show 'Setup' property inside a zone or on non-SDC.\
OS-2025 Upgrade to bunyan 0.19.0\
OS-1827 add man page for sysinfo(1m)\
OS-2019 joyent brand should support optional processor sets instead of
cpu caps\
IMGAPI-126 ChecksumError reports incorrect MD5 sums\
OS-2022 improve imgadm import error handling for corrupt download\
OS-2014 raise timeout in attempt to get VM tests passing.\
IMGAPI-112 imgadm v2 considers import of already existing image an
error\
IMGAPI-114 imgadm v2 SourcePing error message doesn't give any details\
IMGAPI-113 imgadm v2 allows you to specify the same source twice with
and without a '/'\
IMGAPI-114 imgadm v2 SourcePing error message doesn't give any details\
IMGAPI-111 imgadm v2 blows up with "TypeError: Cannot read property
'size' of undefined" on import\
OS-2011 make vmadm more helpful when you pass in invalid JSON.\
OS-1773 update last\_modified timestamp for a VM after create-snapshot
or delete-snapshot\
OS-1981: enabling / disabling the firewall for a VM ignores remote VMs

illumos\
--------

OS-1177 FMA/SMF notify and FMA agent components depend on nonexistent
Net-SNMP\
OS-1970 Add support for the Areca 1882\
OS-2054 want platform to deliver GRUB in a separate bundle\
OS-1928 parent rn\_lock being held across calls to rc\_hold\
OS-2052 prctl broken due to missing libsaveargs.so.1\
OS-2031 fmtopo -P flag does not appear to set properties\
3544 save-args matcher could be considerably more robust\
3545 save-args matcher should accept saves may be out-of-order\
OS-1998 need topology map for Richmond-A disks, etc\
OS-1997 mpt\_sas: expose LED controls to libtopo\
3620 Corruption of the \`xprt-ready' queue in svc\_xprt\_qdelete()\
OS-2009 default ipf state table size is too small\
OS-2029 upgrade: 6.5 portal zone net config incompatible with vmadm\
3567 dtrace print() doesn't play well with ::dtrace\
OS-2027 uninitialised variable trashes command line on coal\
2986 nfs: exi refcounter leak at rfs3\_lookup\
Back out hg changeset 829c00a55a37, bug 2986 – introduces vulnerability\
3623 kstat must accept partial stat specification\
OS-2013 psrset should support specifying a zone to bind\
OS-2018 zoneadmd should export all attributes to brand statechange
scripts\
OS-2008 GZ per-zone /dev/zvol access can make zvol hierarchy can show up
in every zone\
3606 zpool status -x shouldn't warn about old on-disk format\
3604 zdb should print bpobjs more verbosely (fix zdb hang)\
3602 mdb should tab complete global symbols\
OS-1882 full tmpfs can cause GZ svc.configd to die and not be
restartable\
OS-1764 core dumping is abysmally slow\
OS-1987 disks in zpools never go away when pulled\
3598 want to dtrace when errors are generated in zfs\
OS-1996 mpt\_sas: allow physical topology enumeration in libtopo\
3517 importing pool with autoreplace=on and "hole" vdevs crashes
syseventd

illumos-extra\
--------

OS-2032 bind should find nm in /usr/bin\
OS-2033 illumos-extra install.subr should not reference /usr/ccs for
strip\
OS-2034 libm should find ld, mcs, and strip in /usr\
OS-2023 update to latest abort\_on\_uncaught\_exception.patch

kvm\
--------

HVM-770 ioapic should return zero reads for bogus pins

kvm-cmd\
--------

Mar 07, 2013
----------------

smartos-live\
--------

OS-1865 keep output from zonecfg/zoneadm commands so we can track
failures coming from brand scripts.\
OS-1978 don't spew error about zone not existing when we're confirming
it was deleted.\
OS-2000 SATA hotplug should have nice things\
OS-1995 VM tests should use imgadm to ensure images are installed\
OS-1866 validate should reject payloads that contain invalid
image\_uuids\
OS-1874 vmadmd should ignore zone transitions that it doesn't care
about.\
OS-1962 / OS-1791 stopping a non-running VM should be a noop.\
joyent/smartos-live\#180 drop faulty logic sanity checks for image name
from zfs origin\
OS-1980: vmadm update: setting firewall\_enabled doesn't enable /
disable ipf\
OS-1974 / OS-1834 fix problems with many snapshots and serialize zfs
list commands.\
OS-1974 don't lose data when there are many snapshots\
OS-1834 don't run multiple 'zfs list' commands at the same time\
OS-1964 Fix log flushing in vmadm\
OS-1971 fix case where data comes in while we're cleaning up zoneevent
watcher and VM.js throws uncaught exception.\
OS-1954 node\_zfs timeout too low\
OS-1951 imgadm: specific exit status for ImageNotInstalled from 'imgadm
info' et al\
OS-1953 imgadm should only run for root in the GZ\
OS-1947 add dependency for metadata agent on filesystem/local\
OS-1943: \`imgadm sources -a <https://127.0.0.1> -vvv\` crash\
OS-1941: 'imgadm import UUID' broken, and make check

illumos\
--------

OS-1977 tmpfs\_minfree's bowl of porridge is now too hot\
OS-1988 Make ldi\_ev\_remove\_callbacks safe to use in LDI callbacks
Reviewed by: Robert Mustacchi &lt;rm@joyent.com&gt;\
3530 ::smbsess prints wrong IP addresses in verbose mode, has no idea
about IPv6\
3603 panic from bpobj\_enqueue\_subobj()\
3604 zdb should print bpobjs more verbosely\
3551 hvm\_sd module missing dependencies on scsi and cmlb\
3582 zfs\_delay() should support a variable resolution\
3584 DTrace sdt probes for ZFS txg states\
OS-1988 Make ldi\_ev\_remove\_callbacks safe to use in LDI callbacks\
OS-1910 want grub support for cross-menu OS console variable\
OS-1986 /usr/bin/head should implement -c -q and -v.\
3530 ::smbsess prints wrong IP addresses in verbose mode, has no idea
about IPv6\
3603 panic from bpobj\_enqueue\_subobj()\
3604 zdb should print bpobjs more verbosely\
OS-1985 ::mptsas should show slot/enclosure for targets\
OS-1966 fix DEBUG build\
3551 hvm\_sd module missing dependencies on scsi and cmlb\
OS-1909 pfiles shows incorrect socket information on some getsockname
calls\
OS-1979 getsockname should set the sa\_family\_t for unbound unix domain
sockets\
3582 zfs\_delay() should support a variable resolution\
3584 DTrace sdt probes for ZFS txg states\
OS-1815 3curses manual pages missing\
OS-1976 tmp\_inactive uses memory after freeing\
OS-1973 stub out fs and ss limit feature compatibility\
OS-1969 zone boot failed: could not open slave side of zone console\
OS-1929 pfiles shouldn't try to trace itself OS-1931 pfiles crashes on
processes with no files\
OS-1528 wheels fell off dtrace.h during a merge\
OS-1929 pfiles shouldn't try to trace itself\
OS-1931 pfiles crashes on processes with no files\
815 Need ipadm(1M) manual page\
3464 zfs synctask code needs restructuring\
3426 assertion failed: irq &lt; 16 on VMware hardware version 9 (apix
related)\
3581 spa\_zio\_taskqZIO\_TYPE\_FREEZIO\_TASKQ\_ISSUE-&gt;tq\_lock is
piping hot\
3543 Feature flags causes assertion in spa.c to miss certain cases\
3588 provide zfs properties for logical (uncompressed) space used and
referenced\
3552 condensing one space map burns 3 seconds of CPU in spa\_sync()
thread (fix race condition)\
OS-1528 wheels fell off dtrace.h during a merge\
backout OS-1566 filesystem limits for ZFS datasets: merge\
815 Need ipadm(1M) manual page\
3464 zfs synctask code needs restructuring\
3426 assertion failed: irq &lt; 16 on VMware hardware version 9 (apix
related)\
OS-1945 "pargs -l" dies on incomplete core dumps\
OS-1956 mdb\_v8 can't display strings on 3.16.14.x\
OS-1957 ::findjsobjects displays too many false positives\
OS-1959 ::v8print doesn't properly process "char" type\
OS-1960 ::findjsobjects -l should list all representative objects\
3581 spa\_zio\_taskqZIO\_TYPE\_FREEZIO\_TASKQ\_ISSUE-&gt;tq\_lock is
piping hot\
3543 Feature flags causes assertion in spa.c to miss certain cases\
OS-1947 add dependency for zones on metadata\
3588 provide zfs properties for logical (uncompressed) space used and
referenced\
OS-1939 ::findjsobjects array detection suffers from false positives\
OS-1940 ::findjsobjects -p/-c should allow objects to be specified\
OS-1944 ::findjsobjects should sort by product of properties and
instances\
3557 dumpvp\_size is not updated correctly when a dump zvol's size is
changed\
3558 setting the volsize on a dump device does not return back ENOSPC\
3559 setting a volsize larger than the space available sometimes
succeeds\
3560 dumpadm should be able to remove a dump device\
3578 transferring the freed map to the defer map should be constant
time\
3579 ztest trips assertion in metaslab\_weight()\
3501 mdb: ::thread -d needs the SWITCH column\
3496 sysevent runtime files are under /var/run\
3431 sharectl prints garbage when it failed\
3412 The ascii art in nfs4.h needs update\
1927 nfs4 stale clientid loop (OI server, Linux client)\
3515 sd gives RMW warnings for reads\
3552 condensing one space map burns 3 seconds of CPU in spa\_sync()
thread\
3564 spa\_sync() spends 5-10% of its time in metaslab\_sync() (when not
condensing)\
3566 recursive mutex panic in specfs\
3561 arc\_meta\_limit should be exposed via kstats\
3116 zpool reguid may log negative guids to internal SPA history\
3537 want pool io kstats\
3523 SMB NT Notify returning too soon\
3223 SMB FindFirst/FindNext don't fill in Last Name Offset\
374 cron should send more useful mail\
3529 iostat should display time used by dtrace\
3522 zfs module should not allow uninitialized variables\
3503 usba doesn't initialize cc\_no\_resources, causes gibberish output
in kstat:\
3531 Race between log\_sysevent\_filename() and log\_event\_upcall() can
cause panic\
3512 rounding discrepancy in sa\_find\_sizes()\
3513 mismatch between SA header size and layout\
3534 Disable EEE support in igb for I350\
3535 mdb ::print should pretty-print ipaddr\_t and friends\
3305 smbfs mount shows password\
3507 Tunable to allow block allocation even on degraded vdevs\
3519 DTrace fails to resolve const types from fbt\
3520 dtrace internal error – token type 316 is not a valid D compilation
token\
3521 clean up dtrace unit tests\
3516 Leftover multidata transmit kernel statistics in ipv6\
3514 Spurious errors setting up new SMB client sessions\
3498 panic in arc\_read():
!refcount\_is\_zero(&pbuf-&gt;b\_hdr-&gt;b\_refcnt)\
3508 NFS4 data corruption (client side)\
3511 dtrace.c erroneously checks for memory alignment on amd64\
3325 nsmb\_close locking and teardown deadlock\
3465 ::walk ... | ::&lt;dcmd&gt; misinterprets input as symbol names\
3466 ::tsd should handle missing/NULL values better\
3467 mdb\_ctf\_vread() could be more useful\
3468 mdb enhancements for zfs development\
3470 ::whatis does not print callers from KMF\_LITE\
3473 mdb\_get\_module() returns wrong module\
3371 dumpadm -z is not documented in manpage\
3380 zfs man page: documentation for zfs allow is confusing\
3196 ao\_gendisp use by make is racey\
3237 r10 is added 2 times to panic info\
3502 panic in smb\_server\_shutdown (sl\_count assertion)\
604 CIFS server should traverse child mount points\
749 "/usr/bin/kstat" should be rewritten in C (fix SPARC build)\
749 "/usr/bin/kstat" should be rewritten in C\
3485 statd is not handling incoming SM\_NOTIFY properly when the
hostname is not resolvable\
3492 some e1000g devices don't support 15 unicast addresses\
3419 usbftdi needs to support the BeagleBone\
3477 SunSSH config should accept TCPKeepAlive as synonym for KeepAlive\
452 getconf should support NPROCESSORS\_\*\
3474 tar should support -C on extract\
3035 LZ4 compression support in ZFS and GRUB\
3444 README for usr/src/test\
3445 ZFS tests for restricted aclmode\
3552 condensing one space map burns 3 seconds of CPU in spa\_sync()
thread (fix race condition)\
3557 dumpvp\_size is not updated correctly when a dump zvol's size is
changed\
3558 setting the volsize on a dump device does not return back ENOSPC\
3559 setting a volsize larger than the space available sometimes
succeeds\
3560 dumpadm should be able to remove a dump device\
3578 transferring the freed map to the defer map should be constant
time\
3579 ztest trips assertion in metaslab\_weight()\
3501 mdb: ::thread -d needs the SWITCH column\
3496 sysevent runtime files are under /var/run\
3431 sharectl prints garbage when it failed\
3412 The ascii art in nfs4.h needs update\
1927 nfs4 stale clientid loop (OI server, Linux client)\
3515 sd gives RMW warnings for reads\
3552 condensing one space map burns 3 seconds of CPU in spa\_sync()
thread\
3564 spa\_sync() spends 5-10% of its time in metaslab\_sync() (when not
condensing)\
3566 recursive mutex panic in specfs\
3561 arc\_meta\_limit should be exposed via kstats\
3116 zpool reguid may log negative guids to internal SPA history\
3537 want pool io kstats\
3523 SMB NT Notify returning too soon\
3223 SMB FindFirst/FindNext don't fill in Last Name Offset\
374 cron should send more useful mail\
3529 iostat should display time used by dtrace\
3522 zfs module should not allow uninitialized variables\
3503 usba doesn't initialize cc\_no\_resources, causes gibberish output
in kstat:\
3531 Race between log\_sysevent\_filename() and log\_event\_upcall() can
cause panic\
3512 rounding discrepancy in sa\_find\_sizes()\
3513 mismatch between SA header size and layout\
3534 Disable EEE support in igb for I350\
3535 mdb ::print should pretty-print ipaddr\_t and friends\
3305 smbfs mount shows password\
3507 Tunable to allow block allocation even on degraded vdevs\
3519 DTrace fails to resolve const types from fbt\
3520 dtrace internal error – token type 316 is not a valid D compilation
token\
3521 clean up dtrace unit tests\
3516 Leftover multidata transmit kernel statistics in ipv6\
3514 Spurious errors setting up new SMB client sessions\
3498 panic in arc\_read():
!refcount\_is\_zero(&pbuf-&gt;b\_hdr-&gt;b\_refcnt)\
3508 NFS4 data corruption (client side)\
3511 dtrace.c erroneously checks for memory alignment on amd64\
3325 nsmb\_close locking and teardown deadlock\
3465 ::walk ... | ::&lt;dcmd&gt; misinterprets input as symbol names\
3466 ::tsd should handle missing/NULL values better\
3467 mdb\_ctf\_vread() could be more useful\
3468 mdb enhancements for zfs development\
3470 ::whatis does not print callers from KMF\_LITE\
3473 mdb\_get\_module() returns wrong module\
3371 dumpadm -z is not documented in manpage\
3380 zfs man page: documentation for zfs allow is confusing\
3509 igb should not set alternate mac address on newer models\
3422 zpool create/syseventd race yield non-importable pool\
3425 first write to a new zvol can fail with EFBIG\
3196 ao\_gendisp use by make is racey\
3237 r10 is added 2 times to panic info\
3502 panic in smb\_server\_shutdown (sl\_count assertion)\
604 CIFS server should traverse child mount points\
749 "/usr/bin/kstat" should be rewritten in C (fix SPARC build)\
749 "/usr/bin/kstat" should be rewritten in C\
3485 statd is not handling incoming SM\_NOTIFY properly when the
hostname is not resolvable\
3492 some e1000g devices don't support 15 unicast addresses\
3419 usbftdi needs to support the BeagleBone\
3477 SunSSH config should accept TCPKeepAlive as synonym for KeepAlive\
452 getconf should support NPROCESSORS\_\*\
3474 tar should support -C on extract\
3035 LZ4 compression support in ZFS and GRUB\
3444 README for usr/src/test\
3445 ZFS tests for restricted aclmode\
3463 agent lwp clobbers amd64 abi stack redzone

illumos-extra\
--------

OS-1990 IPMItool in SDC7 does not support bmc or lanplus interfaces\
OS-1967: bash 'test -x' always returns true

kvm\
--------

kvm-cmd\
--------

Feb 21, 2013
----------------

smartos-live\
--------

OS-1941: 'imgadm import UUID' broken, and make check\
OS-1938 imgadm v2 fails to install image when not connected to Internet\
OS-1937 have vmadm, vmadmd and metadata agent abort on uncaught
exception.\
OS-1859 imgadm v2\
OS-1935 update async.js to upstream
1fecb21940135b2ff647a93d1fc83df03b363714\
OS-1933 fix issue where preloadZoneData callback called more than once
in some cases.\
OS-1927 ramdisk runs out of inodes\
OS-1924 vmadm should allow filtering by nics.\*.nic\_tag\
OS-1926 vmadm does not allow filtering by nics.\*.vlan\_id=0\
OS-1661 vmadm and vmadmd should use node-panic to dump core on uncaught
exceptions for post-mortem debugging.\
OS-1923 vmadm create does not validate included firewall payload\
OS-1922 vmadm not exiting with non-zero on errors\
OS-1916 fix validation for image\_uuid,image\_size,image\_name +
size,block\_size\
FWAPI-17 Don't attempt to install removed rule file\
smartos-live/joyent\#177 fix issue with brand joyent not being supported
for some datasets due to missing '/' in path.\
FWAPI-17 Don't attempt to install removed parser files\
FWAPI-17 Rename machine to vm\
FWAPI-8 Improve fwadm logging\
OS-1789 set refreservation to prevent overprovisioning KVM disks.\
OS-1229 fix case where brand is undefined in validate.\
OS-1229 / smartos-live\#173 expose validate command via vmadm (thanks
MerlinDMC)\
OS-1894: Warn, but do not crash, if metadata information is not present\
OS-1851 + OS-1730 VM.reboot should wait until zone is rebooted before
returning.\
OS-1903 add support for tracing timers in vmadmd.\
OS-1900 add test to ensure dtrace-provider keeps working correctly.\
OS-1902 fix problems with transition provisioning -&gt; running when
using nowait: true\
OS-1900 fix dtrace-provider.js so correct binding is loaded.\
OS-1864 don't accept invalid IP addresses.\
OS-1881 force max\_swap to always be &gt;= 256M\
OS-1895 fix problems updating tmpfs when tmpfs size not specified at
create time.

illumos\
--------

OS-1906 have sngl brand use files from dataset, remove use of SNGL\_BASE
tarball.\
3035 LZ4 compression support in ZFS and GRUB\
OS-1908 ::findjsobjects needs to find/process JavaScript arrays\
OS-1913 ::jsprint overflows stack on extremely large objects\
OS-1925 ::jsprint can print spurious members\
OS-1914 ::findjsobjects should be able to find references in bulk\
OS-1934 mdb\_v8 should be compiled with MDB\_API\_VERSION set to 3\
OS-1932 mdb\_dcmd\_f not defined when MDB\_API\_VERSION is 3\
OS-1921 GRUB menu scrolling overwrites text\
OS-1915 mdb\_modapi should support creating v3 dmods\
OS-1898 would like an mdb\_v8 walker to iterate over property values\
OS-1899 ::jsprint should allow more than one optional member\
OS-1904 update banner for 2013\
OS-1897 libtermcap symlinks in /usr/lib are busted\
OS-1889 Using /dev/ipnet in the GZ duplicates packets\
OS-1888 DTrace print() should try to resolve function pointers\
OS-1890 want grub composite console\
OS-1885 deadlock between vnic destroy and kstat read\
OS-1867 mdb\_v8's ::jsstack should be able to filter based on function\
OS-1868 should be able to specify a desired frame property to ::jsframe\
OS-1880 ::jsprint should be able to print base address with every
property

illumos-extra\
--------

OS-1937 add support for abort\_on\_uncaught\_exception in platform
node.\
OS-1918 upgrade node to 0.8.20 with fd patch\
OS-1887 openssl 1.0.1d corrupts data

kvm\
--------

kvm-cmd\
--------

Feb 07, 2013
----------------

smartos-live\
--------

OS-1813 include files from /opt/custom/etc/rsyslog.d/ to extend rsyslog
config for GZ persistently.\
OS-1862 fix documentation for tests.\
OS-1848 + OS-1849 fix validation on create-snapshot, fix tests for KVM.\
OS-1842 switch to Logger.child() for VM actions.\
OS-1798 ON build should use pkgsrc python

illumos\
--------

OS-1872 zoneadmd parent needs to close open fds\
3422 zpool create/syseventd race yield non-importable pool\
3425 first write to a new zvol can fail with EFBIG\
OS-1861 default tmpfs\_minfree is far too low\
OS-1854 mdb\_v8's ::jsprint should take an optional member\
OS-1852 mdb\_v8 should be able to print dictionary properties on
3.11.10.x\
OS-1840 fmdump shall emit JSON\
OS-1845 newer igb models should not handle alternate mac address\
OS-1843 logadm unnecessarily copies historical logs when "-c" is
specified\
OS-1841 logadm test suite fails when running rsyslogd\
OS-1837 logadm should not lock log file for entire duration of copy\
OS-1836 passwd command truncates usernames to 8 chars by default
(overflow)\
OS-1836 passwd command truncates usernames to 8 chars by default\
OS-1799 stage-licenses should only be hit when building packages\
OS-1800 onbld python tools shouldn't hardocde /usr/bin/python\
OS-1801 Remove vistigial git-active.py\
OS-1833 panic in fsflush of tmpfs\
OS-1826 tmpfs in a non-global zone does not abide by tmpfs\_minfree\
OS-1822 svc.startd dies in getutxent\_frec()

illumos-extra\
--------

OS-1869 upgrade openssl1x to 1.0.1d\
OS-1846 platform node executes proto code during build

kvm\
--------

kvm-cmd\
--------

Jan 24, 2013
----------------

smartos-live\
--------\
OS-1839: Improve imgadm install message\
OS-1831 update platform bunyan to 0.18.1\
OS-1669 make it possible to rotate log for running VM.js process\
Add noinstall grub entry to build\_iso\
OS-1824: sysinfo should show server 'setup' state\
OS-1810 configure should not depend on user's PATH\
OS-1771 smartos-live configure fetch\_studio error: 'tar: directory
checksum error'

illumos\
--------\
OS-1823 git-pbchk should not depend on mercurial\
OS-1832 fix for OS-1783 broke at when zone has no network\
OS-1783 Cron firing delayed when unable to lookup hostname in
getaddrinfo\
OS-1817 yes(1) needs error handling to avoid spinning\
OS-1763 mount of /etc/svc/volatile failed: Device busy\
OS-1819 lofiadm is looking for libz.so directly instead of libz.so.1\
Illumos Sync\
fix manifest (CA cert removal), mr\_sas mismerge\
fix mismerge in dmu.c; remove build for pylibbe\
Illumos Sync\
OS-1802 want column(1)\
OS-1811 zfs\_write()/zfs\_putpage() deadlock\
3451 archive libraries with no symbols shouldn't require a string table\
3450 elfdump crashes on non-Solaris/Linux objects\
3436 relocatable objects also need sloppy relocation\
3439 discarded sections shouldn't end up on output lists\
3453 GNU comdat redirection does exactly the wrong thing\
3442 sgs checks should be run in normal builds\
3441 -zassert-deflib messages are in the wrong place\
3440 librtld\_db demos need warnings gagged\
3447 improve the comment in txg.c\
3443 Missing curly-braces in one ixgbe file.\
995 boot message: No randomness provider enabled for /dev/random\
3315 svccfg export -a drops values in PG "general"\
3408 detect socket type of newer AMD CPUs\
3414 Need a new word of AT\_SUN\_HWCAP bits\
3415 Add isainfo support for f16c and rdrand\
3416 Need disassembler support for rdrand and f16c\
3413 isainfo -v overflows 80 columns\
3417 mdb disassembler confuses rdtscp for invlpg\
1723 apix module mistakingly sets TPR\
3364 dboot should check boot archive integrity\
3396 new psrinfo does not print socket type\
3352 would like 64bit install libraries\
3311 Want a test framework for arbitrary OS unit tests\
3312 Add a testrunner package for OS unit tests\
3313 Add a testrunner package to convert ZFS tests from STF\
3381 webrev: The latest version may be obtained here.\
3359 hostid generation should be more "predictable"\
3385 The cdrw manpage should mention ISO, not High Sierra\
3378 cdrw is unable to write some ISO images\
3397 zdb &lt;pool&gt; &lt;objnum&gt; output is too verbose\
3398 zdb can't dump feature flags zap objects\
3337 x64 link-editor is painfully literal-minded about TLS\
3394 combine /usr/bin/df and /usr/xpg4/bin/df\
3327 Add -m flag to df\
3245 in.ndp daemon should not be session leader\
3254 add support in zfs for aclmode=restricted\
3236 zio nop-write (fix uninitialized variables)\
3236 zio nop-write\
3349 zpool upgrade -V bumps the on disk version number, but leaves the
in core version\
3272 findunref should support git\
3308 ipmi.h causes SPARC build noise\
3178 Support for LSI 2208 chipset in mr\_sas (fix SPARC build)\
3310 root CA certs should be removed from illumos-gate\
3344 splashimage needs to be updated with "new" logo\
3178 Support for LSI 2208 chipset in mr\_sas\
3329 spa\_sync() spends 10-20% of its time in spa\_free\_sync\_cb()\
3330 space\_seg\_t should have its own kmem\_cache\
3331 deferred frees should happen after sync\_pass 1\
3335 make SYNC\_PASS\_\* constants tunable\
3314 disable multi-threaded dump until it can be removed\
3339 vmware e1000 emulation does not support multiple mac addresses\
OS-1588 library search path very broken in perl build\
OS-1820 update gcc 4.4.4 to include -fstrict-calling-conventions\
OS-1331 libxml2 build system needs conversion\
OS-1332 openssl build system needs conversion\
OS-1775 platform OpenSSL needs upgrade, name mangling\
OS-1814 nss-nspr needs to use the bootstrap compilers\
OS-1816 libidn in illumos-extra must deliver headers to proto

Jan 10, 2013
----------------

smartos-live\
--------\
OS-1797 log more process info when a GZ process blocks zone shutdown\
OS-1793 make VM.start return only after VM has gone to running\
OS-1790 fix typo in vmadm's shutdown/reboot message.\
OS-1784 build should use gxgettext from pkgsrc

illumos\
--------\
OS-1804 agent lwp clobbers amd64 abi stack redzone\
OS-1803 elf and gelf manual pages missing\
OS-1812 ::typedef should be able to source types from other files\
OS-1794 /usr/sbin/shutdown fails to bring down zone\
OS-1795 zone error: failed to setup environment\
OS-1792 dbuf\_read\_impl shows too much enthusiasm\
OS-1786 /usr/bin/man should not override PATH if TROFF is set\
OS-1788 need manual page for htonll and ntohll\
OS-1787 missing man 3xnet manual pages\
OS-1785 cmd/ssh/Makefile shouldn't hardcode paths\
OS-1782 want ::x86\_featureset

kvm-cmd\
--------\
HVM-763 uhci timer does not properly set expire time\
HVM-765 qemu needs -msave-args\
HVM-767 qemu e1000g shouldn't botch popts\
HVM-768 qemu dcmds for ram and bios

Dec 27, 2012
----------------

smartos-live\
--------\
STOR-109 want RAIDZ2 bias for large-slow-disk configurations\
joyent/smartos-live\#140 fix zpool names in brand scripts\
OS-1769 require nic\_tag on all NICs when adding\
OS-1660 / joyent/smartos-live\#138 require non-dhcp NICs netmask, and
require model for KVM nics\
OS-1768 prevent failures when zone moves /var/svc/provisioning before
fs.watch is setup.\
OS-1765 fix mechanism for finding quota when metadata unavailable and no
delegated dataset.\
OS-1767: Fix exception handling on zone socket error\
OS-1751 mkzpool should accept -f

illumos\
--------\
OS-1779 svccfg export should accept instance FMRIs\
OS-1566 filesystem limits for ZFS datasets\
OS-1780 ipdadm accidentally a newline\
3315 svccfg export -a drops values in PG "general"

Dec 13, 2012
----------------

smartos-live\
--------\
OS-1759 mkdir /var/log/vm if it doesn't exist and if we can't create it,
just log to ring buffer.\
OS-1755 add test case for non-vmadm snapshots to ensure this is
exercised in the future.\
HEAD-1352 platform image larger than necessary\
OS-1755 fix typo which breaks things when you have snapshots created
outside vmadm.\
OS-1753 / joyent/smartos-live\#147 fixed update to nics.\*.model\
OS-1672 add support for 'SDC Agents' in the sysinfo output.\
OS-1752 / joyent/smartos-live\#144 fixed regression with setting
vnc\_port=-1\
OS-1709 add support for creating, deleting and rolling-back snapshots on
OS VMs which have no extra datasets.\
OS-1746,OS-1739 cleanup some issues with provisioning transitions\
OS-1746 have vmadmd and vmadm both watching for provisioning -&gt;
running transitions\
OS-1739 remove support for ancient datasets and the joyent brand since
they refuse to run mdata:exec\
OS-1744 add support for zonecfg flags added by OS-1170 to VM.js\
1742 make vmobj.resolvers flattenable\
OS-1740 vmadm sometimes fails to write log records before exit\
FWAPI-7 fwadm should refuse to run in a non-global zone\
OS-1734 'zonemon -k' broken with mdb errors and other errors coming from
background\
OS-1597 don't allow -o nics.\*.ip or other wildcard values for ordering
or sorting.\
OS-1737 add workaround for provisioning smartos-1.8.0 and smartos-1.8.1
datasets (also see joyent/smartos-live\#148)\
OS-1736 Allow creating / modifying firewall rules in the GZ (manifest
update)\
OS-1736 Allow creating / modifying firewall rules in the GZ\
OS-1703 mdata-get should write errors and diagnostics to stderr.\
OS-1726 add support to VM.js and vmadm for 'sngl' brand.\
OS-1735 add support to metadata agent for sngl brand.\
OS-1731 fix problem where vmadmd doesn't bring up VNC on
provisioning-&gt;running transition.\
OS-1732 don't assume vmobj.zpool is set and use vmobj.zonepath instead
when available.\
OS-1027 add 'provisioning' state for VMs when they're created until
they're actually 'running'.\
illumos\
--------\
OS-1760 Need disassembler support for rdrand and f16c\
OS-1757 Add isainfo support for f16c and rdrand (fix xset flags)\
OS-1758 Need a new word of AT\_SUN\_HWCAP bits\
OS-1757 Add isainfo support for f16c and rdrand\
OS-1756 task\_join()/pr\_lookup\_procdir()/pr\_szoneid() deadlock\
OS-1749 oawk must die\
OS-1705 smf won't transition down\
OS-1734 'zonemon -k' broken with mdb errors and other errors coming from
background\
OS-1728 add force unmount support to tmpfs

Nov 30, 2012
----------------

<font color="#222222">smartos-live</font>\
<font color="#222222">-----------------</font>\
<font color="#222222">    OS-1731 fix problem where vmadmd doesn't bring
up VNC on provisioning-&gt;running transition.</font>\
<font color="#222222">    OS-1732 don't assume vmobj.zpool is set and
use vmobj.zonepath instead when available.</font>\
<font color="#222222">    OS-1027 add 'provisioning' state for VMs when
they're created until they're actually 'running'.</font>\
<font color="#222222">    OS-1729 configure does not handle comments in
configure-branches</font>\
<font color="#222222">    OS-1717 bump mdata:execute timeout to 300s
from 60s</font>\
<font color="#222222">    OS-1714 update to json 5.1.1 for jsontool\#42
fix</font>\
<font color="#222222">    OS-1710 add missing manifest entry for
mdata-execute script.</font>\
<font color="#222222">    OS-1710 Expand mdata:execute to handle the
/var/svc/provisioning flag file. Make sure the mdata.xml file is added
to the 'joyent' brand too (just disabled, to be enabled by
zoneinit).</font>\
<font color="#222222">    OS-1671 add support for /.smartdc\_version
file which will indicate the SDC branch we're runnign under.</font>\
<font color="#222222">    OS-1685 dboot should check boot archive
integrity</font>\
<font color="#222222">    OS-1627 smartos-live ./configure needs some
love</font>

<font color="#222222">illumos-joyent</font>\
<font color="#222222">-------------------</font>\
<font color="#222222">    OS-1723 DTrace should speak JSON</font>\
<font color="#222222">    OS-1704 add a time field with ISO time or unix
timestamp to zoneevent output</font>\
<font color="#222222">    OS-777 ipfilter should support loading /
modifying per-zone rules from the GZ</font>\
<font color="#222222">    OS-1725 add SNGL brand</font>\
<font color="#222222">    OS-1713 lscf\_instance\_verify does not
properly handle disabled EMI</font>\
<font color="#222222">    OS-1724 umem walker can fail on ptc-enabled
caches</font>\
<font color="#222222">    OS-1474 Want ::typedef</font>\
<font color="#222222">    OS-1598 Want mdb -e</font>\
<font color="#222222">    OS-1600 Want an mdb test suite driver</font>\
<font color="#222222">    OS-1632 mdb on x86 should be able to print
alternate register names</font>\
<font color="#222222">    OS-1699 libctf should support removing a
dynamic type</font>\
<font color="#222222">    OS-1700 libctf does not validate arrays
correctly</font>\
<font color="#222222">    OS-1701 libctf does not validate function
types correctly</font>\
<font color="#222222">    OS-1685 dboot should check boot archive
integrity</font>\
<font color="#222222">    OS-1693 need workaround for
RICHMOND-16</font>\
<font color="#222222">    OS-1706 zfs compression in a zone is ok after
all</font>

<font color="#222222">kvm</font>\
<font color="#222222">------</font>\
<font color="#222222">  HVM-761 host panic in
paging64\_walk\_addr+0xc6</font>

<font color="#222222">kvm-cmd</font>\
<font color="#222222">------------</font>\
<font color="#222222">    HVM-758 Add a qmp entry for hw setup
complete</font>

Nov 15, 2012
----------------

<font color="#222222">smartos-live</font>\
<font color="#222222">-----------------</font>\
<font color="#222222">    OS-1628 tools/build\_illumos should not pass
-i</font>\
<font color="#222222">    OS-1695 fix IP address
of </font>[datasets.joyent.com](http://datasets.joyent.com/)<font color=
"#222222"> now
that old one was deleted.</font>\
<font color="#222222">    OS-717 apix code induces hangs</font>\
<font color="#222222">    OS-1684 fix vmadm display of delegated dataset
when mountpoint has been changed</font>\
<font color="#222222">    OS-1633 add support for 'snapshots' listing in
VM objects in VM.js</font>\
<font color="#222222">    smartos-live\#133 fixed issue deleting KVM VMs
with snapshots (thanks calmh)</font>\
<font color="#222222">    smartos-live\#114 imgadm should send Host
header in HTTP requests</font>\
<font color="#222222">    OS-1441 routing-setup service provides no
useful log output</font>\
<font color="#222222">    OS-1680 update node-dtrace provider to
3336f6ebd2fc73c6cfd4d09be3d80a</font><font color="#222222">5716aace8d
(0.2.3)</font>

<font color="#222222">illumos-joyent</font>\
<font color="#222222">--------------------</font>\
<font color="#222222">    OS-1697 zoneadmd halt retry timeout should be
increased</font>\
<font color="#222222">    OS-1694 exit()/lxprocfs races can induce
panic</font>\
<font color="#222222">    OS-1698 Missing pcbe modules for Sandy and Ivy
Bridge families</font>\
<font color="#222222">    OS-717 apix code induces hangs</font>\
<font color="#222222">    OS-577 race in netstack\_unregister and zone
creation</font>\
<font color="#222222">    OS-1690 want zid2zone and zdid2zone</font>\
<font color="#222222">    OS-1691 want a dcmd for going from netstack id
to nestack\_t</font>\
<font color="#222222">    OS-1683 ship elfedit</font>\
<font color="#222222">    3203 system-zones tries to deliver global-zone
only template files into NGZ</font>\
<font color="#222222">    3294 pfiles postmortem support</font>\
<font color="#222222">    3298 illumos link-editor and related tools
should be differentiable</font>\
<font color="#222222">    3263 link.h should work in a largefile
environment</font>\
<font color="#222222">    3265 link-editor builds bogus .eh\_frame\_hdr
on ia32</font>\
<font color="#222222">    3306 zdb should be able to issue reads in
parallel</font>\
<font color="#222222">    3321 'zpool reopen' command should be
documented in the man page and help message</font>\
<font color="#222222">    OS-1682 lxpr\_uiobuf\_write() can overflow its
buffer</font>\
<font color="#222222">    OS-1441 routing-setup service provides no
useful log output</font>\
<font color="#222222">    3304 need workaround for QEMU bug that induces
bad e1000g checksums</font>\
<font color="#222222">    3246 ZFS I/O deadman thread</font>\
<font color="#222222">    3302 ld(1) should document -zguidance</font>\
<font color="#222222">    3299 file should only care about object
capabilities</font>\
<font color="#222222">    3300 file should care about all object
capabilities</font>\
<font color="#222222">    3301 lapsus calami multum</font>\
<font color="#222222">    3285 memory leaks in libsldap</font>\
<font color="#222222">    3169 userland amd64 code should save
arguments</font>\
<font color="#222222">    3180 mdb should handle push-based argument
save area</font>\
<font color="#222222">    3192 mdb save-args matching should accept more
agressive insn scheduling</font>\
<font color="#222222">    3193 mdb save-args matching should only
consider insns which have executed</font>\
<font color="#222222">    3288 git-pbchk invents blank lines, then
complains about them</font>\
<font color="#222222">    702 tput calls gets()</font>\
<font color="#222222">    3286 README.mapfiles needs an update</font>\
<font color="#222222">    2563 remove python2.4 from onbld</font>\
<font color="#222222">    1147 integrate the virtio-block driver</font>\
<font color="#222222">    1562 Integrate the virtio core module</font>\
<font color="#222222">    2911 blkdev-related panic on DEBUG
kernels</font>\
<font color="#222222">    3261 linker should ignore unknown hardware
capabilities</font>\
<font color="#222222">    3259 ld.so.1(1) should document capabilities
environment variables</font>\
<font color="#222222">    3260 linker is insufficiently careful with
strtok</font>\
<font color="#222222">    72 \_tx\_error needs to preserve the errno
value it is supposed to display</font>\
<font color="#222222">    3177 LDAP client: support for uniqueMember
attribute</font>\
<font color="#222222">    3262 webrev only includes oldest cset comment
when file changes multiple times</font>\
<font color="#222222">    3270 Additional PCI ID (1000,86) needed for
mpt\_sas(7d)</font>\
<font color="#222222">    3258 ztest's use of file descriptors is
unstable</font>\
<font color="#222222">    370 would like an open ipmi baseboard
driver</font>\
<font color="#222222">    3206 Long(er) username crontab setup
failure</font>\
<font color="#222222">    3150 poll times out immediately in 32bit
kernels</font>\
<font color="#222222">    3217 cfgadm should spell "adapters"
correctly</font>\
<font color="#222222">    3154 Nonconforming tolower and toupper with
UTF-8 locales</font>\
<font color="#222222">    2064 vnic sets up protection before upper mac
leading to panic</font>\
<font color="#222222">    3234 docbook xsl path should be
configurable</font>\
<font color="#222222">    3228 Want -zassert-deflib for ld</font>\
<font color="#222222">    3229 ld(1) does not document
-zfatal-warnings</font>\
<font color="#222222">    3230 ld.so.1 should check default paths for
DT\_DEPAUDIT</font>\
<font color="#222222">    3145 single-copy arc</font>\
<font color="#222222">    3212 ztest: race condition between
vdev\_online() and spa\_vdev\_remove()</font>\
<font color="#222222">    1930 smb\_match functions incorrectly handle
multibyte characters</font>\
<font color="#222222">    1931 smb\_convert\_wildcards incorrectly
expands &lt; at the end of the pattern</font>\
<font color="#222222">    backout 3157: needs more work</font>\
<font color="#222222">    3200 panic from ill\_taskq\_dispatch</font>\
<font color="#222222">    3027 installgrub can segfault when
encountering bogus data on disk</font>\
<font color="#222222">    3208 moving zpool cross-endian results in
incorrect user/group accounting</font>\
<font color="#222222">    2933 compiler warning gags need better
granularity</font>\
<font color="#222222">    3132 remove support for building with gcc
3</font>\
<font color="#222222">    1126 date(1)'s usage message doesn't mention
-R</font>\
<font color="#222222">    1788 "WARNING: Cannot lookup root device:
/devices" is useless when rootfs is zfs</font>\
<font color="#222222">    1828 powerd's "Able to open /dev/srn" notice
is useless</font>\
<font color="#222222">    2547 Minor updates to README</font>\
<font color="#222222">    2678 zfs manpage mis-identifies checksum
default value</font>\
<font color="#222222">    2811 missing implementation: zfs send
-r</font>\
<font color="#222222">    3199 Update copyright years in
usr/src/prototypes/</font>\
<font color="#222222">    3214 ldapclient man page does not document
tls:none setting</font>\
<font color="#222222">    3210 ld should tolerate SHT\_PROGBITS for
.eh\_frame sections on amd64</font>\
<font color="#222222">    3162 nfs: some unusable code in
nfs4\_srv.c</font>\
<font color="#222222">    3160 nfs: OPEN\_CONFIRM with non-regular file
returns wrong error</font>\
<font color="#222222">    3161 nfs: OPEN\_DOWNGRADE with non-regular
file returns wrong error</font>\
<font color="#222222">    3158 nfs: Server should return NFS4\_OK with
zero length COMPOUND request</font>\
<font color="#222222">    3159 nfs: Server returns wrong access\_mode
with some ACCESS requests</font>\
<font color="#222222">    3157 nfs: wrong utf8-encoded string should be
cause of error</font>\
<font color="#222222">    3156 nfs: '.', '..', and filename with '/'
return wrong error code</font>\
<font color="#222222">    3155 nfs: fs\_location being asked but not
setted return error</font>\
<font color="#222222">    3149 ps should have dmodel as an output
format</font>\
<font color="#222222">    3139 zdb dies when it tries to determine path
of unlinked file</font>\
<font color="#222222">    3202 prevent compiler function cloning</font>\
<font color="#222222">    3189 kernel panic in ZFS test suite during
hotspare\_onoffline\_004\_neg</font>\
<font color="#222222">    3047 grep support for -r would be
useful</font>\
<font color="#222222">    3052 uname compatibility should be implemented
with redefine\_extname</font>\
<font color="#222222">    2224 closed-bins should be stripped of
CTF</font>\
<font color="#222222">    2986 nfs: exi refcounter leak at
rfs3\_lookup</font>\
<font color="#222222">    3181 t\_onfault should be preserved across
pagefaults</font>\
<font color="#222222">    3179 vmem\_xalloc needs to check for
overflow</font>\
<font color="#222222">    3064 usr/src/cmd/zpool/zpool\_main.c misspells
"successful"</font>\
<font color="#222222">    3067 Typo in spelling "succssful"</font>

<font color="#222222">illumos-extra</font>\
<font color="#222222">-----------</font>\
<font color="#222222">    OS-1673 gmake clean misses some 64-bit strap
directories</font>\
<font color="#222222">    OS-1681 upgrade platform node to 0.8.14</font>

Nov 1, 2012
---------------

<font color="#222222">smartos-live</font>\
<font color="#222222">-----------</font>\
<font color="#222222">    OS-1677 Add Makefile sections for node-dtrace
module.</font>\
<font color="#222222">    OS-1677 Add unmodified node-dtrace provider
(0.2.2)
db13b0aeafc1db58c756ee4d9ed65b</font><font color="#222222">808a6b700c
and libusdt
8ab25b6e5d32afc9147890ba80b1e9</font><font color="#222222">9a4102717e</f
ont>\
<font color="#222222">    OS-1676: 'json -h' output has incorrect link
to online man page</font>\
<font color="#222222">    OS-1615 switch VM.js logging to bunyan</font>\
<font color="#222222">    OS-1614 pull in node-bunyan 0.14.6 which has
some changes I made/need.</font>\
<font color="#222222">    OS-1654 0-livesrc-stamp should build with
-zassert-deflib</font>\
<font color="#222222">    OS-1653 smartos-live needs to help strap
along</font>\
<font color="#222222">    OS-1549 fix so vmadm stop; vmadm start works,
add tests.</font>\
<font color="#222222">    OS-1649 fix handling of quota when sysinfo
unavailable.</font>\
<font color="#222222">    OS-1644 Update bge pci ids for OS-1366</font>\
<font color="#222222">    TOOLS-207: Fix overzealous escaping</font>\
<font color="#222222">    TOOLS-207: Do not drop backslashes when
returning metadata values that contains them</font>

<font color="#222222">illumos-joyent</font>\
<font color="#222222">--------------</font>\
<font color="#222222">    OS-1645 after svccfg import is killed,
subsequent import fails</font>\
<font color="#222222">    OS-1665 Update pci.ids to latest
release</font>\
<font color="#222222">    OS-1634 svcs -ZL does not work when a pattern
is specified</font>\
<font color="#222222">    OS-1366 add support for BCM 5719, 5720, and
BCM5784M chipset</font>\
<font color="#222222">    OS-1643 improve comments for svc.startd \[fix
unicode backtick\]</font>\
<font color="#222222">    OS-1643 improve comments for
svc.startd</font>\
<font color="#222222">    OS-1209 shutdown of a zone can silently fail
\*sometimes\* when a zone is still starting up</font>\
<font color="#222222">    2869 duplicate packets with vnics over
aggrs</font>\
<font color="#222222">    OS-1626 tar -C support on extract would be
nice</font>

<font color="#222222">illumos-extra</font>\
<font color="#222222">-------------</font>\
<font color="#222222">    OS-1639 illumos-extra should build with
-zassert-deflib</font>\
<font color="#222222">    OS-1640 illumos-extra is missing some
dependencies</font>\
<font color="#222222">    OS-1641 1-extra-stamp build erroneously uses
bootstrap build</font>\
<font color="#222222">    OS-1652 ntp is missing dependency on
routing</font>\
<font color="#222222">    OS-1126 NTP Service Can Stall "Setup Reboot"
by 30 Minutes</font>

<font color="#222222">kvm-cmd</font>\
<font color="#222222">-------</font>\
<font color="#222222">    OS-1658 kvm-cmd should build with
-zassert-deflib</font>\
<font color="#222222">    OS-1655 kvm user portions should build with
-zassert-deflib and -zguidance</font>

Oct 18, 2012
----------------

smartos-live\
------------\
OS-1492 SmartOS and SDC should have the same net-physical\
OS-1623 Increase process.max-file-descriptor rctl default value\
OS-1625 vmadm: improve random MAC generation and related logging\
OS-1624: json 5.1.0\
OS-1615 switch to bunyan be4909a0ac93e1cf2103386e1147e05c8733c777
(0.14.5)\
OS-1615 import node-bunyan 1844dfd0625689774ffd1a6f65d134381a209493\
OS-1610 fix the timing issue wrt sysinfo by reloading just after mdata
is available\
OS-1611 fix alias column width for long aliases.\
OS-1610 fix output of sysinfo within zones.\
OS-1565 Allow provisioning VMs on aggregations (allow denormalized
MACs)\
OS-1565 Allow provisioning VMs on aggregations\
OS-1493 configure should work as non-root user\
OS-1592 Hasta la vista libshell docs\
OS-1594 FLEX path should be explicitly set\
AGENT-519: Support the listing of keys via the KEYS command

illumos-joyent\
--------------\
OS-1561 mdb\_v8 should display JSDate objects\
OS-1562 mdb\_v8 should differentiate objects based on constructor\
OS-1563 mdb\_v8 generates spurious warnings on some fields\
OS-1564 ::findjsobjects can avoid many one-byte mdb\_vread()'s\
OS-1601 mdb\_v8 should be able to print objects with dictionary
properties\
OS-1618 mdb\_v8 should quote strings when printing JSON objects\
OS-1617 mdb\_printf()'s "%H" misprints integer values larger than 64K\
OS-1607 FSS observability needs to handle projects with no shares\
OS-1605 vrrpadm dies when its configuration file doesn't exist\
OS-1603 fixed issue with hard links for locale files where there
shouldn't be\
OS-1595 locale support missing\
OS-1590 zfs dedup & compression properties should not be changeable on a
delegated dataset\
OS-1592 Hasta la vista libshell docs\
OS-1593 aw hacks no longer needed

illumos-extra\
-------------\
OS-1630 screen needs to explicitly state its prefix\
OS-1631 system screenrc should be in /etc not /usr\
OS-1621 Update OpenSSL to latest stable (CVE-2012-2333)\
OS-1596 ntp doesn't set path in it's custom install targets

Oct 4, 2012
---------------

smartos-live\
------------\
OS-1586 Lockfile naming doesn't allow for concurrent builds\
OS-1585 SmartOS build should use docbook from pkgsrc\
OS-1581 mpt\_sas missing alias for pciex1000,87\
OS-1577 configure should set JAVA\_HOME\
OS-1578 configure should set GNU ROOT\
OS-1489 vmadm: support VRRP vnics (man page update)\
OS-1093 Need X540 driver aliases support\
OS-1560 Add Atheros AR8132 / L1c PCI IDs\
STOR-102 zfs cache flush and other settings are misbound\
OS-1489 vmadm: support VRRP vnics

illumos\
-------\
OS-1589 Stop building hal\
OS-883 Panic in i\_mac\_notify\
OS-1568 Want -zassert-deflib for ld\
OS-1569 ld.so.1 should check default paths for DT\_DEPAUDIT\
OS-1570 ld(1) does not document -zfatal-warnings\
OS-1584 ON should support a path to docbook XSL Root\
OS-1576 Sundry uninitialised variables\
OS-1575 sas for the goose\
OS-1574 libzdoor checks for NULL that cannot be\
OS-1573 vnic\_dev.c insufficiently explicit\
OS-1572 Explicitly handle all possible enum values in switches\
OS-1571 Placate gcc -Wparentheses\
OS-1583 ship msg tools in ast for fake-subset\
OS-1582 ship fp driver\
OS-1506 panic from ill\_taskq\_dispatch\
3320 noncompliant devices break sd-config-list (uninit variable)\
OS-1558 Updated mr\_sas breaks Studio build\
3220 noncompliant devices break sd-config-list

illumos-extra\
-------------\
OS-1587 gcc and gas makefile rules not properly updated\
OS-1580 binutils tools should have g prefix\
OS-1579 binutils needs to use bash as the shell\
illumos-extra\#7 pbzip2 filesize limited to 2GB

kvm\
—\
HVM-745 Reintroduce kvm\_para.h\
HVM-738 smb\_wmb and smb\_rmb in kvm\_x86.h shouldn't be visible to
userland

kvm-cmd\
-------\
HVM-750 guest virtio drivers are racy with respect to interrupts\
HVM-751 CONFIGURE\_ONLY check in build.sh is wrong\
HVM-752 Import qemu-kvm.git barrier changes

Sept 24, 2012
-----------------

<font color="#222222">smartos-live</font>\
<font color="#222222">------------</font>\
<font color="#222222">    OS-534 Replace /etc/services with an updated
list</font>\
<font color="#222222">    OS-1143 Update mr\_sas for LSI 2208
support</font>\
<font color="#222222">    OS-1550 FSS observability and comment
improvements</font>\
<font color="#222222">    OS-1477 update /usr/bin/json to v5.0.0</font>\
<font color="#222222">    OS-1546 add -a option to zonememstat to add
alias column in output.</font>\
<font color="#222222">    OS-1543 core cleanup in cron erroneously looks
at cores/\* (which might not exist) rather than cores/</font>\
<font color="#222222">    TOOLS-184 fix intermittent net failures in VM
test suite (skip these tests for now)</font>\
<font color="#222222">    OS-1324 illumos should be built with the
illumos-extra gcc 4.4.4</font>\
<font color="#222222">    OS-1526 move binutils into
illumos-extra</font>\
<font color="#222222">    OS-1539 core pruning can result in email
warnings</font>\
<font color="#222222">    OS-1538 presence of /etc/zones/global.xml
causes problems</font>\
<font color="#222222">    OS-1536 fix race in VM creation when other VMs
partially deleted.</font>\
<font color="#222222">    OS-1512 improved FSS observability</font>\
<font color="#222222">    OS-1521 Add image\_uuid to list of -o/-s
fields in vmadm</font>\
<font color="#222222">    OS-1529 Hi, everybody! I'm dr\_sas.</font>\
<font color="#222222">    HEAD-1245 disable console-login:ttyb when
running in a VM.</font>

<font color="#222222">illumos</font>\
<font color="#222222">-------</font>\
<font color="#222222">    OS-1551 ld should tolerate SHT\_PROGBITS for
.eh\_frame sections on amd64</font>\
<font color="#222222">    OS-1552 dr\_sas needs fixes from
OS-709</font>\
<font color="#222222">    OS-1466 Ship ldap clients service for GZ and
joyent brand</font>\
<font color="#222222">    OS-1234 add new rctls to resource\_controls(5)
man page</font>\
<font color="#222222">    OS-1553 duplicate code in
cpu\_update\_pct</font>\
<font color="#222222">    OS-1143 Update mr\_sas for LSI 2208
support</font>\
<font color="#222222">    OS-1550 FSS observability and comment
improvements</font>\
<font color="#222222">    OS-1545 dtrace\_dof\_maxsize is far too
small</font>\
<font color="#222222">    OS-1542 libipd needs some manifest
additions</font>\
<font color="#222222">    OS-1282 SunSSH config should have TCPKeepAlive
as synonym for KeepAlive</font>\
<font color="#222222">    OS-1524 t\_onfault should be preserved across
pagefault() in trap()</font>\
<font color="#222222">    OS-1541 vmem\_xalloc() needs to check for
overflow</font>\
<font color="#222222">    OS-1540 Would like %N support in
date(1)</font>\
<font color="#222222">    illumos sync</font>\
<font color="#222222">    OS-1530 ipmi should use /dev/ipmi0 for
compatability</font>\
<font color="#222222">    OS-1531 allow get\_smbios\_info to
fail</font>\
<font color="#222222">    OS-1532 remove bmc\_intf.h</font>\
<font color="#222222">    3098 zfs userspace/groupspace fail without
saying why when run as non-root</font>\
<font color="#222222">    OS-1529 Hi, everybody! I'm dr\_sas.</font>\
<font color="#222222">    OS-1512 improved FSS observability</font>\
<font color="#222222">    OS-1514 ipmi assumes FreeBSD copyin()
behaviour</font>\
<font color="#222222">    3146 i915 debugging code can chew SSE
state</font>\
<font color="#222222">    3165 Privilege.xs perform unsafe casting of
priv\_ptype\_t to int</font>\
<font color="#222222">   Backed out changeset e05f5705283d  (wrong
name)</font>\
<font color="#222222">    3165 Privilege.xs perform unsafe casting of
priv\_ptype\_t to int</font>\
<font color="#222222">    3006 VERIFY\[S,U,P\] and ASSERT\[S,U,P\]
frequently check if first argument is zero</font>\
<font color="#222222">    3021 option for time-ordered output from
dtrace(1M) (fix lint)</font>\
<font color="#222222">    1884 Empty "used" field for zfs \*space
commands</font>\
<font color="#222222">    3028 zfs</font>

<div class="error">

<span class="error">Unknown macro: {group,user}</span>

</div>

<font color="#222222">space -n prints (null) instead of numeric
GID/UID</font>\
<font color="#222222">    3048 zfs</font>

<div class="error">

<span class="error">Unknown macro: {user,group}</span>
<font color="#222222">space \[-s|-S\] is broken</font>\
<font color="#222222">    3049 zfs</font>

</div>

<font color="#222222">space -t doesn't really filter the results</font>\
<font color="#222222">    3060 zfs</font>

<div class="error">

<span class="error">Unknown macro: {user,group}</span>
<font color="#222222">space -H output isn't tab-delimited</font>\
<font color="#222222">    3061 zfs</font>

</div>

<font color="#222222">space -o doesn't use specified fields
order</font>\
<font color="#222222">    3093 zfs</font>

<div class="error">

<span class="error">Unknown macro: {user,group}</span>

</div>

<font color="#222222">space's -i is noop</font>\
<font color="#222222">    3140 fmdump -t/-T incorrectly parses
date/time</font>\
<font color="#222222">    3128 igb missing I350 SERDES cases</font>\
<font color="#222222">    3135 lofi\_uncompress doesn't initialize all
variables</font>\
<font color="#222222">    3133 nfs4: remove static for
nfs4\_max\_xxx</font>\
<font color="#222222">    3109 libshare\_nfs: findopt() should return
index</font>\
<font color="#222222">    3106 rpc: xdr\_sizeof can return wrong
size</font>\
<font color="#222222">    3134 nfs4: cleaning code in nfs4\_xdr</font>\
<font color="#222222">    3107 nfs4\_getattr incorrectly checks bit
masks</font>\
<font color="#222222">    3129 'zpool reopen' restarts resilvers</font>\
<font color="#222222">    3130 ztest failure: Assertion failed: 0 ==
dmu\_objset\_destroy(name, B\_FALSE) (0x0 == 0x10)</font>\
<font color="#222222">    3138 smb\_token\_create\_privs() passes const
char to smb\_lgrp\_getbyname()</font>\
<font color="#222222">    3122 zfs destroy filesystem should prefetch
blocks</font>\
<font color="#222222">    3121 missing SMF method directories should say
something useful</font>\
<font color="#222222">    3112 ztest does not honor ZFS\_DEBUG</font>\
<font color="#222222">    3113 ztest should use watchpoints to protect
frozen arc bufs</font>\
<font color="#222222">    3114 some leaked nvlists in
zfsdev\_ioctl</font>\
<font color="#222222">    3115 poll(2) returns prematurely in presence
of spurious wakeups</font>\
<font color="#222222">    1862 incremental zfs receive fails for sparse
file  &gt; 8PB</font>\
<font color="#222222">    3123 need a way to force loading of DTrace
helpers</font>\
<font color="#222222">    2982 nfs3: cleanup debug code at
nfs3\_srv.c</font>\
<font color="#222222">    3119 zonecfg(1M) still mentions sparse
zones</font>\
<font color="#222222">    3117 aac forgets C isn't math</font>\
<font color="#222222">    2904 hxge forgets C isn't math</font>\
<font color="#222222">    2601 kctl\_isadep.c should support four serial
consoles</font>\
<font color="#222222">    3104 eliminate empty bpobjs</font>\
<font color="#222222">    3120 zinject hangs in zfsdev\_ioctl() due to
uninitialized zc</font>\
<font color="#222222">    3100 zvol rename fails with EBUSY when
dirty</font>\
<font color="#222222">    3103 zfs mdb module may get wrong refcount
struct</font>\
<font color="#222222">    3063 many instances of unlike enum
comparison</font>\
<font color="#222222">    3088 some THIRDPARTYLICENSE files erroneously
removed</font>\
<font color="#222222">    3090 vdev\_reopen() during reguid causes vdev
to be treated as corrupt</font>\
<font color="#222222">    3102 vdev\_uberblock\_load() and
vdev\_validate() may read the wrong label</font>\
<font color="#222222">    3086 unnecessarily setting
DS\_FLAG\_INCONSISTENT on async destroyed datasets</font>\
<font color="#222222">    3057 Remove sgml util from cmd/man</font>\
<font color="#222222">    3065 some functions in the tcp module can be
static</font>\
<font color="#222222">    2399 zfs manual page does not document use of
"zfs diff"</font>\
<font color="#222222">    3085 zfs diff panics, then panics in a loop on
booting</font>\
<font color="#222222">    3080 uninitialized var in dcopy\_free may
panic on boot</font>\
<font color="#222222">    3059 cmd/tcpd/\* files should have correct
functions prototypes</font>\
<font color="#222222">    3013 ifconfig with no args should list all
interfaces</font>\
<font color="#222222">    212 Atheros AR8132 / L1c Gigabit Ethernet
Adapter</font>\
<font color="#222222">    1154 cpio needs a quiet option</font>\
<font color="#222222">    2560 ACPI parser fails to identify COM3 on
Tyan motherboard</font>\
<font color="#222222">    backout 3006: causes 3046 (panics after
mounting root)</font>\
<font color="#222222">    3006 VERIFY\[S,U,P\] and ASSERT\[S,U,P\]
frequently check if first argument is zero</font>\
<font color="#222222">    3014 Intel X540 Support (fix SPARC
build)</font>\
<font color="#222222">    3014 Intel X540 Support (fix lint)</font>\
<font color="#222222">    3014 Intel X540 Support</font>

<font color="#222222">illumos-extra</font>\
<font color="#222222">-------------</font>

<font color="#222222">    OS-1548 upgrade node.js to 0.8.9</font>\
<font color="#222222">    OS-1527 enable extra password options in
ipmitool build</font>\
<font color="#222222">    OS-1324 illumos should be built with the
illumos-extra gcc 4.4.4</font>\
<font color="#222222">    OS-1526 move binutils into
illumos-extra</font>\
<font color="#222222">    OS-1537 platform openssl should have aesni
support</font>\
<font color="#222222">    OS-1533 Update ipmitool for new ipmi
interface</font>\
<font color="#222222">    OS-1534 /usr/lib/cpp needs to behave in a
pre-ansi manner</font>\
<font color="#222222">    OS-1525 upgrade curl to 7.27 (missing
file)</font>\
<font color="#222222">    OS-1525 upgrade curl to 7.27</font>

Sept 6, 2012
----------------

<font color="#222222">smartos-live</font>\
<font color="#222222">----------------</font>\
<font color="#222222">OS-1518 Add I350 Serdes Driver alias</font>\
<font color="#222222">OS-1509 fs-usr method should only skip smf
repository backup in GZ</font>\
<font color="#222222">OS-1503 we need to periodically prune the zone's
core dataset for old core dumps</font>\
<font color="#222222">OS-1504 In 7.0, the cores dataset quota is a
no-op</font>\
<font color="#222222">TOOLS-181: Fix javascriptlint build</font>\
<font color="#222222">OS-1499 GZ should have more than 1 share</font>\
<font color="#222222">OS-1505 In JPC over 100 zones are missing the
cores dataset</font>\
<font color="#222222">smartos-live\#112 fix creation of KVM VMs with
preset UUID in payload (make check clean)</font>\
<font color="#222222">smartos-live\#112 fix creation of KVM VMs with
preset UUID in payload.</font>\
<font color="#222222">OS-1495 fix incorrect error message when out of
memory.</font>\
<font color="#222222">smartos-live\#94 zone brands need to be more
resiliant to missing nic tags</font>

<font color="#222222">illumos-joyent</font>\
<font color="#222222">-------------------</font>\
<font color="#222222">OS-1501 mdb\_v8 doesn't work on v8 3.13.2 and
later</font>\
<font color="#222222">OS-1519 prstat -n option should accept 0 reviewed
by Robert Mustacchi</font>\
<font color="#222222">OS-1510 DTrace helper tracing should be
dynamic</font>\
<font color="#222222">OS-1511 overly aggressive D integer narrowing
breaks 32-bit ustack helpers</font>\
<font color="#222222">OS-1513 misplaced ASSERT in OS-1247 breaks DEBUG
bits</font>\
<font color="#222222">OS-1517 Add support for I350 Serdes</font>\
<font color="#222222">OS-1507 ipd can blow an assertion when status is
requested on a disabled zone OS-1508 ipd needs a stable library</font>\
<font color="#222222">OS-1054 lofiadm in current smartos can't use -U to
uncompress an lgz image code review by Robert Mustacchi</font>\
<font color="#222222">OS-1497 Increase svc.startd
critical\_failure\_count range from 5 to 10 code reviewed by Bill
Pijewski</font>\
<font color="#222222">OS-1491 SYSOPS-4940 svc.startd incorrectly placing
services into maintenance mode code reviewed by Robert Mustacchi</font>\
<font color="#222222">OS-1520 ipmitool should be using patches</font>

<font color="#222222">kvm</font>\
<font color="#222222">---</font>\
<font color="#222222">HVM-746 kvm makefile does not properly create all
necessary paths.</font>

<font color="#222222">kvm-cmd</font>\
<font color="#222222">-------</font>\
<font color="#222222">HVM-747 add dmods to get event indexes</font>

August 24, 2012
-------------------

<font color="#222222">smartos-live</font>\
<font color="#222222">------------</font>\
<font color="#222222">    smartos-live\#94 zone brands need to be more
resiliant to missing nic tags</font>\
<font color="#222222">    OS-1487 Add bash tab completion for dladm
delete-vnic and delete-etherstub</font>\
<font color="#222222">    OS-1481 0-livesrc-stamp not removed due to
typo</font>\
<font color="#222222">    Merge pull request \#95 from
nshalman/build\_usb</font>\
<font color="#222222">    tools/build\_usb: build a usb image from
scratch</font>\
<font color="#222222">    HEAD-1210 crontab sdc-lastcomm error on
smartos</font>\
<font color="#222222">    STOR-72 storage configuration for log and
cache devices</font>\
<font color="#222222">    STOR-26 Storage configuration with many disks
should create sane RAID groups</font>\
<font color="#222222">    STOR-72 storage configuration for log and
cache devices</font>\
<font color="#222222">    STOR-99 setup must support intelligent pool
layout</font>\
<font color="#222222">    OS-1467 illumos-live manifest changes are
ignored on incremental</font>\
<font color="#222222">illumos-joyent</font>\
<font color="#222222">--------------</font>\
<font color="#222222">    OS-1483 ps should have dmodel as an output
format</font>\
<font color="#222222">    OS-1486 vrrpadm should work with a vnic as its
link</font>\
<font color="#222222">    OS-1485 panic when reading from dump device
with REMOVED/FAULTED vdev</font>\
<font color="#222222">    OS-1484 lack of "smbfs" in /etc/dfs/fstypes
prevents mounting during zone boot</font>\
<font color="#222222">    OS-1454 Look at packaging ipcs and ipcclean
into a package in pkgsrc</font>\
<font color="#222222">    OS-1480 resolve upgrade hiccups around ZFS
checksum values</font>\
<font color="#222222">    OS-1473 shutdown(1) should broadcast shutdown
warnings to all zones like wall(1)</font>\
<font color="#222222">    OS-1470 mdb\_tab.c mismerge</font>\
<font color="#222222">    OS-1469 ship zpool-features man page</font>\
<font color="#222222">    OS-1455 mdb\_v8 misconfigures itself</font>\
<font color="#222222">    OS-1468 mdb\_v8 shouldn't abort
auto-configuration on errors</font>\
<font color="#222222">illumos-extra</font>\
<font color="#222222">-------------</font>\
<font color="#222222">    OS-1462 running openvpn can reliably crash
smartos joyent\_20120726T184637Z</font>\
<font color="#222222">kvm</font>\
<font color="#222222">---</font>\
<font color="#222222">    HVM-742 off-by-one error in bitset
manipulation</font>\
<font color="#222222">    OS-1450 panic in list\_remove() from
kvm\_mmu\_free\_page()</font>

August 9, 2012
------------------

<font color="#222222">Notes: This build includes a sync with illumos
upstream.</font>

<font color="#222222">Changelog:</font>

<font color="#222222">smartos-live</font>\
<font color="#222222">------------</font>\
<font color="#222222">smartos-live\#108 fix failed match on quick lookup
if property type is not string (Thanks MerlinDMC)</font>\
<font color="#222222">OS-1463 remove double quotes from serial number in
sysinfo (Thanks jritorto!)</font>\
<font color="#222222">IMGAPI-13: Robustify imgadm's fatal
error/exception handling</font>\
<font color="#222222">STOR-104 diskinfo misinterprets nvlist, can't
detect removable device</font>\
<font color="#222222">OS-1456 need a mechanism to detect solid state
storage devices</font>\
<font color="#222222">OS-1448 sysinfo chokes if the bios has crazy
characters in some fields (merge fix from jritorto)</font>\
<font color="#222222">Some older x86 Sun hardware has a double-quote in
the on-BIOS serial number and SKU which causes sysinfo to fail.</font>\
<font color="#222222">OS-1444 workaround kvm instability on sandy
bridge</font>\
<font color="#222222">OS-1442 mpt\_sas wants to bind to 1000,86</font>

<font color="#222222">illumos-joyent</font>\
<font color="#222222">--------------</font>\
<font color="#222222">OS-1464 Fix IPMI detection on HP N36L /
N40L</font>\
<font color="#222222">OS-1456 need a mechanism to detect solid state
storage devices</font>\
<font color="#222222">OS-1350 Document BSD ps args</font>\
<font color="#222222">OS-1447 hung mount in one zone shouldn't interfere
with zone boot/halt of another zone</font>\
<font color="#222222">OS-1438 \`man tail\` doesn't mentioned "-F"
option</font>\
<font color="#222222">OS-1451 tail -f does not deal properly with
multiple files</font>\
<font color="#222222">OS-1429 \`tail -f ...\` doesn't notice file
truncation</font>\
<font color="#222222">dtrace: Remove CTF label checking</font>\
<font color="#222222">OS-1443 Refactor prtconf -d output</font>\
<font color="#222222">OS-1445 \`zpool get ...\` broken after illumos
sync</font>\
<font color="#222222">OS-1439 zfs force umount can leak zone ref,
preventing zone shutdown</font>\
<font color="#222222">OS-1391 zone won't halt; vfs ref count is
1</font>\
<font color="#222222">2445 savecore fails with dump archive but return
EXIT\_OK</font>\
<font color="#222222">653 incorrect handling in iscsit of duplicate PDUs
with cmdsn &gt; expsn</font>\
<font color="#222222">3021 option for time-ordered output from
dtrace(1M)</font>\
<font color="#222222">3022 DTrace: keys should not affect the sort order
when sorting by value 3023 it should be possible to deref</font>\
<font color="#222222">2599 git-pbchk suffers classic pipe
deadlock</font>\
<font color="#222222">417 Stale OpenOwner entries are not reaped for
active clients</font>\
<font color="#222222">2447 beadm should be more descriptive about some
errors</font>\
<font color="#222222">2978 ctfconvert still needs to ignore legitimately
dataless files on SPARC</font>\
<font color="#222222">2762 zpool command should have better support for
feature flags</font>\
<font color="#222222">2945 mdb needs to export
\_mdb\_ks\_pageoffset</font>\
<font color="#222222">2991 Allow building without SMB printing
support</font>\
<font color="#222222">2974 hate having heap of hsfs headers 2977
ISO\_DESC\_TYPE should return iso\_voldesc\_type as everyone
expects</font>\
<font color="#222222">1796 "ZFS HOLD" should not be used when doing "ZFS
SEND" from a read-only pool</font>\
<font color="#222222">2871 support for \_\_ZFS\_POOL\_RESTRICT used by
ZFS test suite 2903 zfs destroy -d d</font>\
<font color="#222222">2676 'mdb -f vmdump.0' ignores the -f</font>\
<font color="#222222">2950 sync hald-runner with upstream</font>\
<font color="#222222">2941 need to protect \_\_RESTRICT\_KYWD from
foolish compilers</font>\
<font color="#222222">2942 CTF tools need to handle files which
legitimately lack data</font>\
<font color="#222222">1973 ctfconvert VLA support is broken (again) for
DWARF objects</font>\
<font color="#222222">2882 implement libzfs\_core 2883 changing
"canmount" property to "on" should not always remount dataset</font>\
<font color="#222222">2900 "zfs snapshot" should be able to create
multiple, ar</font>\
<font color="#222222">2741 format shouldn't allow write SMI label to
disk with EFI partition</font>\
<font color="#222222">1799 ipadm create-addr arg validation
crash</font>\
<font color="#222222">2724 snoop contains few problems with accessing
uninitialized data</font>\
<font color="#222222">2910 svc.startd core dump</font>\
<font color="#222222">2801 svc.startd leaks significant amount of
memory</font>\
<font color="#222222">2891 After integration of OS-1168 svc.startd has
no umem debugging in debug build</font>\
<font color="#222222">2881 usbftdi needs support for the SheevaPlug JTAG
adapter</font>\
<font color="#222222">2901 ZFS receive fails for exabyte sparse
files</font>\
<font color="#222222">2602 mdb ::sockparams SEGV</font>\
<font color="#222222">2894 ls(1) -1U can go much faster</font>\
<font color="#222222">2076 blkdev can fail successful xfer if DMA is not
used</font>\
<font color="#222222">2044 Move container\_of and ARRAY\_SIZE to
sys/sysmacros.h</font>\
<font color="#222222">2042 blkdev should not discard
bd-&gt;d\_maxxfer</font>\
<font color="#222222">1910 Implement a generic dev\_err</font>\
<font color="#222222">1882 blkdev should limit physio by
bd-&gt;d\_maxxfer instead of maxphys</font>\
<font color="#222222">1430 blkdev crashes on synchronous flushes</font>\
<font color="#222222">1342 Bogus assert in bd\_xfer\_alloc</font>\
<font color="#222222">1450 Illumos should be buildable with GCC4</font>\
<font color="#222222">2804 psrinfo should not depend on perl</font>\
<font color="#222222">2873 sysretq doesn't properly handle non-canonical
addresses</font>\
<font color="#222222">2574 mdb needs ::printf</font>\
<font color="#222222">2614 nfs logging works incorrectly</font>\
<font color="#222222">2618 arc.c mistypes in the comments</font>\
<font color="#222222">2831 bring Joyent/SmartOS OS-1186 and OS-1187 to
Illumos (fix lint, copyright)</font>\
<font color="#222222">2831 bring Joyent/SmartOS OS-1186 and OS-1187 to
Illumos</font>\
<font color="#222222">2562 FCoE iniator mistreats its ints</font>\
<font color="#222222">2803 zfs get guid pretty-prints the output</font>\
<font color="#222222">backout 2614: packaging errors (incomplete - no
nightly build)</font>\
<font color="#222222">2812 FMA generic topology support for AMD family
0x10 model 10</font>\
<font color="#222222">2802 ipsecalgs needs a dependency upon
filesystem</font>\
<font color="#222222">2614 nfs logging works incorrectly</font>\
<font color="#222222">2730 tar misbehaves if compress utility
missing</font>\
<font color="#222222">2731 add -a --auto feature to tar for gtar
comptability</font>\
<font color="#222222">2810 pmconfig linked against libcmd</font>\
<font color="#222222">2058 libumem should allow you to specify an
allocator</font>\
<font color="#222222">2049 env(1) should print program it attempts to
exec on error, not argv\[0\]</font>\
<font color="#222222">2785
/lib/svc/bin/restore\_</font><font color="#222222">repository
incorrectly uses -eq on strings</font>\
<font color="#222222">1991 svccfg describe -t Segmentation Fault</font>\
<font color="#222222">2742 minor memory allocation issue in
svccfg:upgrade\_manifestfiles()</font>\
<font color="#222222">2777 mpt\_sas needs to try MUR reset at attach()
time.</font>\
<font color="#222222">1165 SUNWarbel/driver-network-arbel should be
removed (fix packaging)</font>\
<font color="#222222">1165 SUNWarbel/driver-network-arbel should be
removed</font>\
<font color="#222222">2619 asynchronous destruction of ZFS file systems
(missed files)</font>\
<font color="#222222">2619 asynchronous destruction of ZFS file
systems</font>\
<font color="#222222">2747 SPA versioning with zfs feature flags</font>\
<font color="#222222">1572 Missing PCI ID for SK-9E21D (yge)</font>\
<font color="#222222">2705 EOF libldap.so.4</font>\
<font color="#222222">2744 libuuid can't tell when mapping fails</font>\
<font color="#222222">2654 add ixgbe support for new x520 models</font>\
<font color="#222222">344 su fails to check malloc's return
value</font>\
<font color="#222222">405 Can't connect to similarly-named, encrypted
wireless networks.</font>\
<font color="#222222">356 tar command needs to add the "J" switch and XZ
compression support</font>\
<font color="#222222">2675 EOF itutools</font>\
<font color="#222222">2733 pgrep/pkill prints misleading error on
missing option argument</font>\
<font color="#222222">2717 tail is not largefile aware</font>\
<font color="#222222">2710 DTrace can cause build failures if the
kernel's CTF data is corrupt</font>\
<font color="#222222">2701 Add tab completion support for mdb</font>\
<font color="#222222">2655 illumos should be lint 12.3 free</font>\
<font color="#222222">2703 add mechanism to report ZFS send
progress</font>\
<font color="#222222">2666 libhal should be more carefull about function
parameters</font>\
<font color="#222222">2667 libhal can leak memory if realloc()
fails</font>\
<font color="#222222">2690 etc/inet/services needs some new
entries</font>\
<font color="#222222">2698 libctf should use libz.so.1, not
libz.so</font>\
<font color="#222222">1618 zfs causing system to hang in
vmem\_xalloc()</font>

<font color="#222222">illumos-extra</font>\
<font color="#222222">-------------</font>\
<font color="#222222">OS-1433 platform node should use libumem</font>

<font color="#222222">kvm</font>\
<font color="#222222">---</font>\
<font color="#222222">HVM-742 off-by-one error in bitset
manipulation</font>\
<font color="#222222">OS-1450 panic in list\_remove() from
kvm\_mmu\_free\_page()</font>

<font color="#222222">kvm-cmd</font>\
<font color="#222222">-------</font>\
<font color="#222222">HVM-741 add SmartOS gPXE patch that was applied
for OS-1153</font>\
<font color="#222222">HVM-740 want a basic dmod for qemu</font>\
<font color="#222222">HVM-737 Add kvm-cmd xref target</font>\
<font color="#222222">HVM-721 kvm-cmd builds too many times</font>\
<font color="#222222">HVM-735 qemu should build with V=1</font>\
<font color="#222222">HVM-736 Qemu is missing a call to ctfmerge</font>

July 26, 2012
-----------------

Changes in this build:

<font color="#222222">smartos-live</font>\
<font color="#222222">----------------</font>\
<font color="#222222">OS-1397 Add Cron Manifest to the Joyent-Minimal
Brand</font>\
<font color="#222222">OS-1402 joyent-minimal should support manifest
that aren't imported</font>\
<font color="#222222">OS-1401 Add vrrp service to zones</font>\
<font color="#222222">OS-1398 zonememstat should ensure columns
align</font>\
<font color="#222222">OS-1395 kernel should not kill a GZ process
preventing zone shutdown if process is not a shell or child of a
shell</font>\
<font color="#222222">OS-1394 Platform build should fail if we are not
mancheck -s clean</font>

<font color="#222222">illumos-joyent</font>\
<font color="#222222">-------------------</font>\
<font color="#222222">OS-1405 CPU caps can throttle performance more
than intended</font>\
<font color="#222222">OS-1406 mdb\_v8 doesn't work on node v0.8</font>\
<font color="#222222">OS-1392 unnecessary conversion of double to
uint64\_t in iob\_bytes2str()</font>\
<font color="#222222">OS-1396 sendmail svcs in error</font>\
<font color="#222222">OS-1355 ship man pages that are present but
missing</font>\
<font color="#222222">OS-1386 SSH key fingerprint not deposited in the
auth logfile.</font>\
<font color="#222222">OS-1367 need ptcumem</font>

<font color="#222222">illumos-extra</font>\
<font color="#222222">------------------</font>

<font color="#222222">OS-1403 bind and ntp don't ship man pages</font>\
<font color="#222222">OS-1355 ship man pages that are present but
missing</font>\
<font color="#222222">OS-1388 illumos-extra node build failure</font>

<font color="#222222">illumos-kvm</font>\
<font color="#222222">----------------</font>\
<font color="#222222">illumos-kvm\#9 Don't use the obsolete
-fno-dwarf2-indirect-strings</font>\
<font color="#222222">HVM-734 Makefile does not create devfsadm
directory</font>

July 13, 2012
-----------------

Changes in this build:

smartos-live\
------------\
smartos-live\#97 rtl8136 should be rtl8139 in vmadm man page\
OS-1374 don't try to open hostname.net0 when the brand doesn't need it.\
OS-1375 implement remove\_disks for update and prevent \*\_disks from
working while VM is running, add tests.\
Use pkg\_info -qe rather than redirecting output.\
RELENG-350 switch to /opt/local/bin/node for man build.\
OS-1372 switch ronnjs to use platform node instead of /usr/bin/env node\
OS-1325 fix creation of VM with no quota, add tests for quota creation.\
OS-1216 fix test that failed to include correct path the VM.js\
OS-1322: media type should be kept when creating an additional disk\
OS-1323: allow path to ISO as path: option for a disk (in which case not
requiring size)\
OS-951 allow multiple cdrom= options to 'vmadm start'\
HEAD-1131 add switch for enabling tests\
OS-1362 move VM tests into the platform\
OS-1358 mancheck should support only showing missing or non-shipping
manual pages\
OS-1354 need tool to check for missing manual pages for binaries

illumos-joyent\
--------------\
OS-1384 ::kmastat overflows columns with inscrutable output\
OS-1378 add "%H" to mdb\_printf() for human-readable sizes\
OS-1381 incorrect isaexec binaries\
OS-1373 startd, configd spinning due to bad sac start method\
OS-1376 cputrack isa-dependent binaries missing from image\
OS-1287 svc.startd gets stuck in a loop when HOME dir doesn't exist\
OS-1344 a misconfigured smf service can cause svc.configd to leak memory
and eventually hang\
STOR-98 rework RAID-Z crash dump comments based on review\
OS-1351 ps - missing column separator\
OS-1359 remove some unneeded cmds from the image\
OS-1343 fast localhost connections choke in TCP TIME\_WAIT\
OS-1364 local auditors specifying LA\_FLG\_BINDTO miss bindings via
elf\_bndr()

illumos-extra\
-------------

OS-1381 incorrect isaexec binaries\
OS-1370 pass V=1 or equivalent to -extra components whenever possible\
OS-1290 switch platform's node to using system libz and openssl\
OS-1342 add environment variable we can set to disable node version
check in dev.\
AGENT-490 pull in v0.8 branch node changes up to f00c8bc

June 29, 2012
-----------------

Changes in this build:

illumos-joyent\
--------------\
OS-1336 Ship dis\
OS-1338 for local auditors, LA\_FLG\_BINDTO does not audit all symbol
bindings\
STOR-97 nits from initial RAID-Z crash dump review\
STOR-76 support crash dumps to pools with multiple vdevs\
STOR-69 support crash dumps on pools with log, cache, and spare devices\
OS-1321 log a message when svc.startd core dumps\
smartos-live\#51 No symlink for libusb.so to libusb.so.1 for -lusb\
smartos-live\#91 make world fails on trying to include zlib.h\
OS-1303 smartos-live src\_addon can die\
OS-1306 non-bootstrappable runtime dependencies should be isolated\
OS-1308 illumos-joyent should support using pkgsrc libraries for native
...\
OS-1314 kvm.so is wrongly built as if it were a kmod\
OS-1317 GZ crle configuration pollution\
OS-1320 64-bit C++ objects in illumos are still getting gcc DT\_RPATH\
OS-1278 svc.startd core dump\
OS-1297 need workaround for QEMU bug that induces bad e1000g checksums\
OS-1292 mail is not being delivered

smartos-live\
------------\
smartos-live\#87 fixed a problem with DSadm and multople sources.\
OS-1348 fix javascriptlint to build against correct python.\
OS-1348 fix 'make check' target and also have it javascriptlint build
properly on OS X.\
OS-1347 ensure zone has completely transitioned when waiting for
transition.\
OS-1346 workaround node changing behavior of exit in 0.8\
OS-1262 - fixed js files to handle changes required for running under
0.8\
OS-1261 - fixed dependencies in platform .js files to explicitly refer
to the platform node\_modules\
OS-1257 - fixed paths for node to point to /usr/node/bin/node\
OS-1339 - moved node-sqlite3 to smartos-live build for inclusion in
platform (built against platform node)\
OS-1329 fix /opt/SUNWspro/sunstudio12.1 link.\
OS-1327 smartos-live Makefile clobbers BUILDSTAMP through variable
auto-export\
OS-1301 smartos-live subprojects should be told about the proto area
(fix path)\
smartos-live\#2 Fixed identation, spaces should be tabs\
smartos-live\#51 No symlink for libusb.so to libusb.so.1 for -lusb\
smartos-live\#86 'make clean' fails if Node.js hasn't been built\
smartos-live\#91 make world fails on trying to include zlib.h\
OS-1301 smartos-live subprojects should be told about the proto area\
OS-1302 smartos-live should offer a way to bootstrap illumos-extra\
OS-1303 smartos-live src\_addon can die\
OS-1304 smartos-live src build should not use node-waf\
OS-1305 illumos-extra should not put libuuid.a into the proto area,
ever\
OS-1306 non-bootstrappable runtime dependencies should be isolated\
OS-1310 smartos-live build doesn't fail even if kvm-cmd completely bombs
out\
OS-1312 smartos-live makefiles must fit in 80 columns\
OS-1317 GZ crle configuration pollution\
OS-1295 Man page fixes for COLUMNS=80\
OS-1292 mail is not being delivered

kvm\
—\
HVM-732 README refers to wrong gcc version\
OS-1298 kvm builds mdb module against the build system's headers\
OS-1299 kvm is still using Studio\
OS-1314 kvm.so is wrongly built as if it were a kmod

kvm-cmd\
-------\
OS-1335 kvm-cmd libpng build needs to learn to be 64-bit\
OS-1300 kvm-cmd build system relies on build system headers and
libraries

June 14, 2012
-----------------

Changes in this release:

- Fix to correct behavior when using "allow\_ip\_spoofing" on zone
    NICs
- Fix for <http://www.kb.cert.org/vuls/id/649219>
- More dtrace probe points in zones. (See
    <http://dtrace.org/blogs/bmc/2012/06/07/dtrace-in-the-zone/> for a
    deeper explanation.)
- "dsadm" is being renamed to "imgadm". You can continue to use
    "dsadm" for now.
    <div class="panelMacro">

      --------------------------------------------------------------- --
------------------------------------------------------------------------
------------------------------------------------------------------------
------------------------------------------------------------------------
------------------
      ![](images/icons/emoticons/check.gif){width="16" height="16"}   Fo
r a tip on how to migrate from an earlier release to the 20120614 releas
e, see this [topic](Migrating%20from%20an%20earlier%20release%20to%20the
%2020120614%20Release.html "Migrating from an earlier release to the 201
20614 Release").
      --------------------------------------------------------------- --
------------------------------------------------------------------------
------------------------------------------------------------------------
------------------------------------------------------------------------
------------------

    </div>

- ...and more, see full changelogs below

smartos-live

----------------

OS-1268 vmadm commands to enable ip\_spoofing don't un-set the
"allowe...d\_ips" linkprop\
OS-1285 fix tests for vmtest.js / test-blocksize.js image import
failure\
OS-1280: imgadm.js should export its log and config objects so they can
be configured\
OS-1277: Add support for returning Number-type values\
OS-1272 add datacenter\_name and headnode\_id keys to VM objects so
they're available as sdc: metadata\
OS-807 zones can commit suicide by zvol\
OS-1249 add list of commands and brief summary of each to imgadm's usage
message.\
OS-1251 fix and restyle img\* bits to pass jsstyle and jslint (with
'make check') and match the style of the other JS bits in the
smartos-live/src dir.\
OS-1250 replace link for dsadm man page with imgadm man page\
OS-1250 add symlink so that docs that use the old dsadm name still work
for the time being.\
OS-1250 rename dsadm -&gt; imgadm as we've settled on the name 'images'
for the zvol and zfs blobs you download and use as templates to create a
mVM.\
OS-1264 add support for boot time in sysinfo for both GZ and NGZ.\
HVM-731 catch exception when zoneroot is full and we try booting a KVM
VM (can't create /startvm).\
OS-1163 bump 'cores' quota for all brands to the larger of 100G or DRAM
+ 20G\
OS-1256 have run-test and run-tests exit non-zero when tests fail.\
OS-1242 remove vmadm call from joyent\* brand jinstall scripts to speed
up creation of large numbers of machines.\
OS-1243 joyent brand hooks refer to map, capi, etc.

illumos-joyent

-------------------\
OS-37 add missing man pages\
OS-1289 nm has no man page\
OS-1288 sysretq doesn't properly handle non-canonical addresses\
OS-1274 Sendmail at /usr/lib/sendmail missing config file\
OS-1283 remove misleading README.joyent file\
OS-1276 /etc/sulogin doesn't exist in the GZ\
OS-807 zones can commit suicide by zvol\
OS-1260 zoneadmd core dump in mcap\_zone()\
OS-1247 need limited access to some DTrace providers in the
non-globa...\
OS-1237 need to be able to access fds\[\] from a non-global zone

May 31, 2012
----------------

<font color="#222222">Notes:</font>

<font color="#222222">We're now checking that the zpool parameter in
your vmadm payloads is an actual zpool, dataset\_uuid and image\_uuid
are actually UUIDs, along with other validation that your payload is
correct. If you have problems please consult the man page for proper
payload options.</font>

<font color="#222222">Changes in this release:</font>

<font color="#222222">smartos-live</font>\
<font color="#222222">------------</font>\
<font color="#222222">OS-1239 fix removal of invalid nics.\* parameters
from payloads.</font>\
<font color="#222222">OS-1235 add support for allow\_unfiltered\_promisc
option for KVM VM's vnics.</font>\
<font color="#222222">OS-1241 kvm prestate and poststate scripts should
call kvm's statechange.</font>\
<font color="#222222">OS-1240 switch tests to joyent-minimal instead of
joyent.</font>\
<font color="#222222">OS-1236 fix sysinfo to not try to use polo which
is gone.</font>\
<font color="#222222">OS-1232 replace build-user-script with
add-userscript which can handle create and update</font>\
<font color="#222222">OS-1231 add support for joyent-minimal to metadata
agent.</font>\
<font color="#222222">OS-1230 fix mdata:fetch service to be enabled by
default in joyent-minimal zones.</font>\
<font color="#222222">OS-1217 add support for joyent-minimal, refactor
handling of properties and add tests.</font>\
<font color="#222222">OS-1193 vmadm: support disabling antispoof on
nics</font>\
<font color="#222222">OS-1224 upgrade /usr/bin/json to 3.1.2</font>\
<font color="#222222">OS-1213 Add tests for setting fs\_allowed.</font>\
<font color="#222222">OS-1226 illumos-live now provides
Joyent.xml</font>\
<font color="#222222">OS-1221 Want Joyent minimal brand</font>\
<font color="#222222">OS-1222 Need a tool to create smf seed
repositories</font>\
<font color="#222222">OS-1218 move more sdc-specific code out of
illumos-joyent</font>\
<font color="#222222">OS-1038 add support for zfs compression,
volblocksize and recsize options.</font>\
<font color="#222222">OS-1215 enable per-brand smf manifest
lists</font>\
<font color="#222222">OS-1214 move sdc-specific zone SMF method out of
illumos-joyent</font>\
<font color="#222222">OS-1212 fix regression in creation of delegated
datasets.</font>\
<font color="#222222">OS-1211 switched to using -F when cloning KVM
images.</font>\
<font color="#222222">OS-1185 fix bug in resizing ram where max\_swap is
added as string.</font>\
<font color="#222222">OS-858 add experimental support for VM.send,
VM.receive, VM.install to VM.js and vmadm</font>\
<font color="#222222">OS-952 started update of illumos-live toward
JEG</font>\
<font color="#222222">STOR-33 added VM.send and VM.receive to serve as a
start toward backup/restore</font>

<font color="#222222">illumos-joyent</font>\
<font color="#222222">--------------</font>\
<font color="#222222">OS-430 dtrace in a zone can't see "cpu"</font>\
<font color="#222222">OS-535 want curpsinfo-&gt;pr\_dmodel inside
zones</font>\
<font color="#222222">OS-1238 ship mcs</font>\
<font color="#222222">OS-1155 allow vnics to be unfiltered in
promiscuous mode</font>\
<font color="#222222">OS-1226 illumos-joyent no longer provides
Joyent.xml</font>\
<font color="#222222">OS-1220 dependencies on manifest-import should
always be optional\_all</font>\
<font color="#222222">OS-1219 svc.configd should reduce footprint by
setting "nomagazines"</font>\
<font color="#222222">OS-1218 move more sdc-specific code out of
illumos-joyent</font>\
<font color="#222222">OS-1215 enable per-brand smf manifest
lists</font>\
<font color="#222222">OS-1214 move sdc-specific zone SMF method out of
illumos-joyent</font>\
<font color="#222222">OS-792 dladm show-linkprop -z zonename doesn't
restrict output to that zone, unless you also specify the vnic
name</font>\
<font color="#222222">OS-1154 update zfs manpage to reflect new get -c
option</font>

May 17, 2012
----------------

<font color="#222222">Changes in this release:</font>

<font color="#222222">illumos-joyent</font>\
<font color="#222222">--------------</font>\
<font color="#222222">OS-1169 fix for OS-493 generates warning on Sun
Studio build</font>\
<font color="#222222">OS-1205 mdb\_v8 is confused by some invalid
objects</font>\
<font color="#222222">OS-1207 missing cpustat and cputrack man pages and
cputrack cmd</font>\
<font color="#222222">OS-932 want SMB binaries and services in
platform</font>\
<font color="#222222">OS-1189 BAD TRAP panic in hyprlofs\_seek</font>\
<font color="#222222">OS-1188 memory leak in
restarter\_get\_method\_context()</font>\
<font color="#222222">OS-1187 svc.startd should reduce footprint by
setting "nomagazines"</font>\
<font color="#222222">OS-1186 svc.startd allocates excessive memory for
instance names</font>\
<font color="#222222">OS-1168 svc.startd should not enable libumem
debugging</font>\
<font color="#222222">OS-1179 zoneadmd re-parses zone's xml config file
many times during state transitions</font>\
<font color="#222222">OS-1170 update zones to support setting custom
init</font>\
<font color="#222222">OS-1154 ::walk jsframe sometimes bails too
early</font>\
<font color="#222222">OS-1180 jstack could be better with native
frames</font>\
<font color="#222222">OS-1181 loading mdb\_v8 should turn on C++
demangling</font>\
<font color="#222222">OS-1182 mdb\_v8 reports wrong file
position</font>\
<font color="#222222">HEAD-1047 root cron jobs aren't being run at
all</font>\
<font color="#222222">OS-1162 need ipadm.1m man page; create one from
PSARC materials and source</font>\
<font color="#222222">OS-1174 ::help tab completion</font>\
<font color="#222222">OS-1175 ::printf tab completion</font>\
<font color="#222222">OS-1176 add missing man3contract man
pages.</font>\
<font color="#222222">OS-1081 /usr/gnu contents are severely broken wrt
ISA</font>\
<font color="#222222">OS-1121 platform delivers unwanted compilation
symlinks</font>\
<font color="#222222">OS-1123 libstdc++ and libgcc\_s should move to
/usr</font>\
<font color="#222222">1168 want a libtermcap that does not force
libcurses</font>\
<font color="#222222">2698 libctf should use libz.so.1, not
libz.so</font>\
<font color="#222222">OS-1171 re-enable building smbd</font>\
<font color="#222222">OS-1159 minimize zone footprint</font>\
<font color="#222222">OS-1165 fix up illumos issue 1948</font>\
<font color="#222222">STOR-54 warnings when creating a delegated ZFS
dataset in a non-global zone</font>\
<font color="#222222">OS-493 NFS client 'entity not found' error when
mounting</font>\
<font color="#222222">OS-1158 add ilb (load balancer) svc to
zones</font>\
<font color="#222222">OS-1133 need ::findjsobjects</font>\
<font color="#222222">OS-1149 update to latest acpica release;
transition to ACPI 5.0</font>\
<font color="#222222">OS-1119 add lxproc, a coarsely Linux-compatible
/proc</font>\
<font color="#222222">OS-1008 TERM support missing for xterm-color 256
color, screen and tmux</font>\
<font color="#222222">OS-994 ZFS hang when snapshotting and
cloning</font>\
<font color="#222222">OS-1134 ZFS rollback hang</font>\
<font color="#222222">OS-1141 missing fma topo support</font>\
<font color="#222222">OS-1115 update libipmi and fma to use /dev/ipmi
instead of /dev/bmc</font>\
<font color="#222222">OS-1139 mdb tab completion</font>\
<font color="#222222">OS-1138 ipmi driver should copyin/copyout addr and
lun ioctl parameter</font>\
<font color="#222222">OS-1129 force the enabling of -o xtrace in
zoneinit for older datasets.</font>\
<font color="#222222">OS-1136 replace builtin /dev/bmc devlink generator
with /dev/ipmi</font>\
<font color="#222222">OS-1131 Want a library to allow programatic access
to the pci database</font>\
<font color="#222222">OS-919 prtconf should print out PCI database
information</font>\
<font color="#222222">OS-782 need to record timestamp when calling
through context ops</font>\
<font color="#222222">OS-101 bmc driver is missing which makes ipmi not
work locally; port freebsd openipmi driver</font>\
<font color="#222222">OS-1079 polkit is mislinked</font>\
<font color="#222222">OS-1080 HAL and its plugins are mislinked</font>\
<font color="#222222">OS-1086 mdb disassembler confuses rdtscp for
invlpg</font>

<font color="#222222">In addition, this tree is synced with mainline
illumos up to commit 09a48d4, "2668 syntax error in terminfo.src trips
uninitialized var in tic, screws terminfo"</font>

<font color="#222222">smartos-live</font>\
<font color="#222222">------------</font>

<font color="#222222">OS-932 want SMB binaries and services in
platform</font>\
<font color="#222222">OS-1190 gmake update fails if illumos-extra
tarball is used</font>\
<font color="#222222">HEAD-1046 sdc-phonehome runs at 0100 UTC for
everyone</font>\
<font color="#222222">HEAD-1060 need to update logadm.conf for
rsyslog</font>\
<font color="#222222">OS-1173 add build-user-script tool to assist in
adding user-scripts to VMs.</font>\
<font color="#222222">OS-1123 libstdc++ and libgcc\_s should move to
/usr</font>\
<font color="#222222">OS-1159 minimize zone footprint</font>\
<font color="#222222">OS-1128 when deleting a VM ensure that it's gone
or return a failure.</font>\
<font color="#222222">OS-1158 add ilb (load balancer) svc to
zones</font>

May 3, 2012
---------------

<font color="#222222">kvm-cmd</font>\
<font color="#222222">-------</font>\
<font color="#222222">OS-1153 Update to a gpxe rom for e1000 built from
the stable-1.0.1 branch of gPXE with a patch that allows booting
SmartOS.</font>

<font color="#222222">illumos-joyent</font>\
<font color="#222222">--------------</font>\
<font color="#222222">OS-1139 mdb tab completion</font>\
<font color="#222222">OS-1119 add lxproc, a coarsely Linux-compatible
/proc</font>\
<font color="#222222">OS-1008 TERM support missing for xterm-color 256
color, screen and tmux</font>\
<font color="#222222">OS-1131 Want a library to allow programatic access
to the pci database</font>\
<font color="#222222">OS-919 prtconf should print out PCI database
information</font>

<font color="#222222">OS-994 ZFS hang when snapshotting and
cloning</font>\
<font color="#222222">OS-1134 ZFS rollback hang</font>\
<font color="#222222">OS-1141 missing fma topo support</font>\
<font color="#222222">OS-1115 update libipmi and fma to use /dev/ipmi
instead of /dev/bmc</font>\
<font color="#222222">OS-1138 ipmi driver should copyin/copyout addr and
lun ioctl parameter</font>\
<font color="#222222">OS-1129 force the enabling of -o xtrace in
zoneinit for older datasets.</font>\
<font color="#222222">OS-1136 replace builtin /dev/bmc devlink generator
with /dev/ipmi</font>\
<font color="#222222">OS-782 need to record timestamp when calling
through context ops</font>\
<font color="#222222">OS-101 bmc driver is missing which makes ipmi not
work locally; port freebsd openipmi driver</font>\
<font color="#222222">OS-1079 polkit is mislinked</font>\
<font color="#222222">OS-1080 HAL and its plugins are mislinked</font>\
<font color="#222222">OS-1086 mdb disassembler confuses rdtscp for
invlpg</font>

<font color="#222222">smartos-live</font>\
<font color="#222222">------------</font>\
<font color="#222222">OS-1147 remove has\_hvx.c and replace with
isainfo</font>\
<font color="#222222">OS-1148 rename zfs\_storage\_pool\_name to zpool,
include deprecation warning and backward compat.</font>\
<font color="#222222">OS-1146 rename compute\_node\_uuid to
server\_uuid</font>\
<font color="#222222">OS-1135 add experimental support for KVM VMs
running a SPICE dataset.</font>\
<font color="#222222">OS-1144 CURL\_BIN should be CURL</font>\
<font color="#222222">HEAD-1020 sdc-phonehome is in smartos
crontab</font>\
<font color="#222222">OS-1140 Fix man page for nics.\*.model in man page
(thanks Tenzer)</font>\
<font color="#222222">OS-1078 mdata api is in SmartOS but mdata-get tool
is missing</font>\
<font color="#222222">OS-1116 update ipmitool to use the open ipmi dev
instead of /dev/bmc</font>\
<font color="#222222">OS-101 bmc driver is missing which makes ipmi not
work locally; port freebsd openipmi driver</font>\
<font color="#222222">HEAD-1017 prompt-config has no controlling
terminal so some control characters don't work</font>\
<font color="#222222">OS-1125 fix detection of zpool.</font>\
<font color="#222222">AGENT-470 don't barf getting last\_modified time
when metadata.json or other file does not exist.</font>\
<font color="#222222">OS-1116 - back out until illumos repo is
updated</font>\
<font color="#222222">AGENT-469 add last\_modified timestamp for
VMs</font>

April 22, 2012
------------------

JohnS says: "<font color="#222222">I apologize for the delay, but I
wasn't willing to ship a release with a known security vulnerability (
OpenSSL CVE-2012-0884 ). This has been patched in the latest
release."</font>

<font color="#222222">Changelog for this build:</font>

<font color="#222222">illumos-extra</font>\
<font color="#222222">-------------</font>\
<font color="#222222">   OS-1112 Need to update OpenSSL to latest stable
(CVE-2012-0884)</font>\
<font color="#222222">   OS-719 Add parallel bzip2 to OS image</font>

<font color="#222222">illumos-joyent</font>\
<font color="#222222">--------------</font>\
<font color="#222222">   OS-1104 'zfs list -o volsize' no longer shows
volsize</font>\
<font color="#222222">   OS-1110 ipd max delay should be increased to 1
second</font>\
<font color="#222222">   OS-858 don't create dataset when installing a
zone that already has a dataset.</font>\
<font color="#222222">   OS-914 Updated x86\_archext with missing cpuid
pieces</font>\
<font color="#222222">   OS-1099 Want support for binutils 2.22</font>\
<font color="#222222">   OS-1098 vmxnet breaks the studio shadow
build</font>\
<font color="#222222">   OS-1095 add /dev/tap and /dev/tun to joyent
branded zones by default.</font>\
<font color="#222222">   OS-1090 Need ixgbe support for X520 DP</font>\
<font color="#222222">   OS-1082 dce\_reclaim\_thread stops making
forward progress</font>\
<font color="#222222">   OS-1096 More lib symlinks</font>\
<font color="#222222">   OS-1087 To better support split / and /usr,
svcadm command should be in /sbin and not /usr/sbin</font>\
<font color="#222222">   OS-1085 Add symlink for /usr/ccs/bin/ar</font>\
<font color="#222222">   HVM-728 Multicast isn't available to VMs</font>

<font color="#222222">illumos-live</font>\
<font color="#222222">-----------</font>\
<font color="#222222">   OS-1101 fix inconsistent use of
default\_gateway and warn as deprecated.</font>\
<font color="#222222">   OS-1094 fix detection of conflicting IPs and
MACs.</font>\
<font color="#222222">   OS-1094 fix detection of conflicting IPs and
MACs.</font>\
<font color="#222222">   OS-1102 dsadm will occasionally mis-handle
EPIPE</font>\
<font color="#222222">   OS-1097 Update driver\_aliases for ET2 Quad
Port Server Adapter</font>\
<font color="#222222">   OS-1091 Need /etc/driver\_alises entries for
the X520 and friends</font>\
<font color="#222222">   OS-1096 More lib symlinks</font>\
<font color="#222222">   OS-1089 add virtio\_txtimer and virtio\_txburst
options for KVM VMs.</font>\
<font color="#222222">   OS-1035 please make it clear how the merged
crontabs work, with comments in the system cron text</font>\
<font color="#222222">   OS-1084 allow primary to be set false on a NIC
for create for purposes of building payloads from a template.</font>\
<font color="#222222">   OS-1083 fix problems with vnic setup which
caused multiple primary check to fail.</font>\
<font color="#222222">   STOR-90 fix for STOR-89 is incorrect</font>

April 5, 2012
-----------------

<font color="#000000">smartos-live</font>\
<font color="#000000">------------</font>\
<font color="#000000">   OS-1069 system-log svc method should generate
rsyslog.conf if possible</font>\
<font color="#000000">   OS-1066 configure and setup-build-zone glib
process is busted</font>\
<font color="#000000">   OS-1068 illumos-live Makefile PATH is a bit
borken</font>\
<font color="#000000">   OS-1066 configure and setup-build-zone glib
process is busted</font>\
<font color="#000000">   OS-1068 illumos-live Makefile PATH is a bit
borken</font>\
<font color="#000000">   STOR-89 want different ZFS /etc/system settings
for SmartOS and SDC</font>\
<font color="#000000">   OS-48 Add universal tun/tap device to live
image so we can use OpenVPN in a zone</font>\
<font color="#000000">   OS-715 deliver 'rsyslog' and make it the logd
for the GZ</font>\
<font color="#000000">   HEAD-980 dsadm sources.list doesnt make it to
the right place</font>

<font color="#000000">illumos-joyent</font>\
<font color="#000000">--------------</font>\
<font color="#000000">   OS-1028 page-level corruption induces kernel
panic</font>\
<font color="#000000">   OS-1077 Update timezone info db to
2012c</font>\
<font color="#000000">   OS-1063 Add a 'big theory' comment to
FSS</font>\
<font color="#000000">   OS-1064 rcapstat should direct you to
zonememstat</font>\
<font color="#000000">   OS-1058 libzfs\_set\_cachedprops() needs
function header in libzfs.h</font>\
<font color="#000000">   OS-1051 process starvation in FSS</font>\
<font color="#000000">   OS-1059 new IP symbols need to be listed in
symbol file</font>\
<font color="#000000">   OS-1056 ip\_dce\_reclaim\_stack() cannot be
made perfectly safe</font>\
<font color="#000000">   OS-1050 boot\_time kstat for zones should be
epoch timestamp of zone boot, not 'random' number</font>\
<font color="#000000">   OS-1048 zfs list/get -c to return only cached
properties</font>

March 22, 2012
------------------

<font color="#000000">smartos-overlay</font>\
<font color="#000000">----------------------</font>\
<font color="#000000">HEAD-980 dsadm sources.list copied on
install</font>

<font color="#000000">smartos-live</font>\
<font color="#000000">----------------</font>\
<font color="#000000">OS-1043 minimize vm\_getusage impact</font>\
<font color="#000000">OS-1052 Missing e1000g pci ids</font>\
<font color="#000000">OS-1013 need ipd entry in
/etc/name\_to\_major</font>\
<font color="#000000">OS-1023 dsadm improvements & manpage</font>

<font color="#000000">illumos-joyent</font>\
<font color="#000000">-------------------</font>

<font color="#000000">OS-978 hyperlofs</font>

<font color="#000000">OS-969 want to perturb vnics</font>\
<font color="#000000">OS-997 net\_\* and hook\_\* man pages are
wrong</font>\
<font color="#000000">OS-1024
sysconfig(\_CONFIG\_AVPHYS\_</font><font color="#000000">PAGES)
extremely slow inside zones</font>\
<font color="#000000">OS-986 remove more unneeded privs.</font>\
<font color="#000000">OS-1044 minimize prstat vm\_getusage
impact</font>\
<font color="#000000">OS-803 make phys mem cap a bit harder</font>\
<font color="#000000">OS-1043 minimize vm\_getusage impact</font>\
<font color="#000000">OS-1042 increase DCE cache tunables</font>\
<font color="#000000">OS-1026 procfs and large file support won't
co-exist</font>\
<font color="#000000">OS-1047 kstat for 10 sec FS ops</font>\
<font color="#000000">OS-1041 node process stuck in squeue mess</font>\
<font color="#000000">OS-1019 zone stuck in down state: amon socket in
/var/run preventing shutdown</font>\
<font color="#000000">OS-1037 hyprlofs shouldn't require linkdir
priv</font>\
<font color="#000000">OS-905 missing man page for hstrerror</font>\
<font color="#000000">OS-1032 Need symlinks for more libs under
/usr/lib</font>\
<font color="#000000">OS-1034 hyprlofs header should not use
const</font>\
<font color="#000000">OS-1031 zfs destroy -F doesn't handle EBUSY from
zfs\_unmount()</font>\
<font color="#000000">OS-1030 hyprlofs unmount panic with dir looped
in</font>\
<font color="#000000">OS-987 vmu\_calculate\_proc() impeding page faults
for thousands of seconds</font>\
<font color="#000000">OS-1029 need hyprlofs GET ioctl</font>

<font color="#000000">In addition, this release includes a long overdue
illumos-gate sync with the following fixes:</font>

<font color="#000000">998 obsolete DMA driver interfaces should be
removed</font>\
<font color="#000000">2242 libraries should be more careful casting
pointers</font>\
<font color="#000000">2251 kernel inlines should support gcc 4</font>\
<font color="#000000">2131 beadm list -a missing units
designation</font>\
<font color="#000000">2195 lm75 ignores the half degree bit in
writes</font>\
<font color="#000000">998 obsolete DMA driver interfaces should be
removed</font>\
<font color="#000000">2179 gss should be more careful with pointer
casts</font>\
<font color="#000000">2163 sparc bits should be more careful casting
pointers</font>\
<font color="#000000">2083 stmf: worker manager doesn't scale workers
anymore</font>\
<font color="#000000">2208 Seems our find doesn't support the '-links'
option, (as mandated by POSIX)</font>\
<font color="#000000">2075 man outputs "geqn should have been given a
\`-Tutf8' option"</font>\
<font color="#000000">2191 Clean up one EINVAL case in
setsockopt(3socket)</font>\
<font color="#000000">2077 lots of unreachable breaks in illumos
gate</font>\
<font color="#000000">2099 powertop output hangs under heavy
load</font>\
<font color="#000000">934 FreeBSD's GPT not recognized</font>\
<font color="#000000">2088 zdb could use a reasonable manual
page</font>\
<font color="#000000">1960 developer tools should support git</font>\
<font color="#000000">1941 timer intervals incorrectly rounded to clock
resolution</font>\
<font color="#000000">1759 sun4u floating-point scrubber should be
removed</font>\
<font color="#000000">2130 zvol DKIOCFREE uses nested DMU
transactions</font>\
<font color="#000000">1439 Panic when booting on IBM SystemX</font>\
<font color="#000000">2059 nightly(1) should support custom From: in
mail</font>\
<font color="#000000">1521 obsolete perl-584 dependency declarations
break onu</font>\
<font color="#000000">2054 e1000g kstat structure contains needless
fields</font>\
<font color="#000000">1588 nfs4 mirror mount hang</font>\
<font color="#000000">1936 add support for "-t &lt;datatype&gt;"
argument to zfs get</font>\
<font color="#000000">1494 rtls never sets rtlsp-&gt;ifname</font>\
<font color="#000000">763 FMD msg URLs should refer to something
visible</font>\
<font color="#000000">1570 add support for GB18030</font>\
<font color="#000000">2061 uts homebrew offsetofs cause various
pointer-cast warnings</font>\
<font color="#000000">1694 Add type-aware print() action (fix
lint)</font>\
<font color="#000000">1688 show zfs ioctl args in truss</font>\
<font color="#000000">2038 Add in I350 and ET2 support into igb</font>\
<font color="#000000">852 Update data files for localedef UTF-8 locales
from CLDR v2.0.1 (fix unref)</font>\
<font color="#000000">1557 assertion failed in userland
taskq\_destroy()</font>\
<font color="#000000">2050 todpc\_rtcget() returns error
sometimes</font>\
<font color="#000000">2041 panic in nsmb\_close</font>\
<font color="#000000">2067 uninitialized variables in zfs(1M) may make
snapshots undestroyable</font>\
<font color="#000000">2062 libbc uname() deals with nodename/nodeext
distastefully</font>\
<font color="#000000">2039 several declarations in uts declare functions
with variable number of args even if they are not</font>\
<font color="#000000">852 Update data files for localedef UTF-8 locales
from CLDR v2.0.1</font>\
<font color="#000000">1569 localedef mishandles some multibyte
locales</font>\
<font color="#000000">2045 eject fails for active console user</font>\
<font color="#000000">2063 check\_rtime should ignore mps</font>\
<font color="#000000">1594 strxfrm may write past the specified
buffer</font>\
<font color="#000000">2055 libssh lint library includes other libraries,
screws up</font>\
<font color="#000000">1914 libses cannot set more than one properties at
once</font>\
<font color="#000000">1984 libses uses threshold diag page wrong
way</font>\
<font color="#000000">1332 ssh should use YESEXPR/NOEXPR</font>\
<font color="#000000">2018 makedbm overwrites and overflows constant
string</font>\
<font color="#000000">2023 libnisdb is inconsistently const-y</font>\
<font color="#000000">2004 newer gcc, and sanity, would benefit from a
newer libdwarf</font>\
<font color="#000000">393 Invalid nd\_hostservlist contents crash
mountd</font>\
<font color="#000000">968 fct driver sets incorrect fc-ct
revision</font>\
<font color="#000000">2003 md\_trans\_ioctl() has incorrect
declaration</font>\
<font color="#000000">1779 panic: assertion failed: rc == DDI\_SUCCESS,
file: ../../common/os/devcfg.c, line: 4185</font>\
<font color="#000000">1890 Updated emlxs driver from Emulex</font>\
<font color="#000000">1668 ldap format string issues when merging search
descriptors</font>\
<font color="#000000">1951 leaking a vdev when removing an l2cache
device</font>\
<font color="#000000">1952 memory leak when adding a file-based l2arc
device</font>\
<font color="#000000">1954 leak in ZFS from metaslab\_group\_create and
zfs\_ereport\_checksum</font>\
<font color="#000000">1949 crash during reguid causes stale
config</font>\
<font color="#000000">1953 allow and unallow missing from zpool history
since removal of pyzfs</font>\
<font color="#000000">1955 sderr kstat should expand when a LUN is
expanded</font>\
<font color="#000000">1909 disk sync write perf regression when slog is
used post oi\_148</font>\
<font color="#000000">1950 ztest backwards compatibility testing
option</font>\
<font color="#000000">1982 Make rpcbind\_getaddr() work with all
versions of rpcbind protocol</font>\
<font color="#000000">1992 sharemgr show -P \[nfs|smb\] doesn't work for
shared datasets</font>\
<font color="#000000">1993 typo bug in
stmfadm.c:createHostGroupFunc(</font><font color="#000000">)</font>\
<font color="#000000">1848 sshd always tries to resolve client's IP to
hostname</font>\
<font color="#000000">1978 iPsGetSetStmfProp is missing some
brackets</font>\
<font color="#000000">1946 incorrect formatting when listing output of
multiple pools with zpool iostat -v</font>\
<font color="#000000">1988 sa\_to\_str can pass junk to
mdb\_nhconvert</font>\
<font color="#000000">1977 zfs allow arguments not parsed correctly
after pyzfs removal</font>\
<font color="#000000">1971 i86 kernel should be more careful when
casting pointers</font>

March 8, 2012
-----------------

<font color="#000000">Changes in this version include vmxnet drivers,
mdb ::printf & bug fixes:</font>

<font color="#000000">illumos-joyent</font>\
<font color="#000000">--------------</font>\
<font color="#000000">OS-986 remove many default privs from KVM VMs that
are unneeded.</font>\
<font color="#000000">OS-993 when creating zone, zfs snapshot && zfs
clone leave empty dataset</font>\
<font color="#000000">STOR-84 reserve checksum entry for
ZIO\_CHECKSUM\_SHA256\_MAC</font>

<font color="#000000">OS-954 add vmxnet driver to illumos</font>\
<font color="#000000">OS-1011 mdb needs ::printf</font>

<font color="#000000">smartos-live</font>\
<font color="#000000">------------</font>

<font color="#000000">OS-986 remove many default privs from KVM VMs that
are unneeded.</font>\
<font color="#000000">OS-1018 fix issues when max\_physical\_memory is
passed to override default, but the value is too low.</font>\
<font color="#000000">OS-1015 vmxnet needs an entry in
driver\_aliases</font>\
<font color="#000000">OS-954 add vmxnet driver to illumos</font>\
<font color="#000000">OS-1012: /usr/bin/json uses wrong \#!</font>\
<font color="#000000">OS-1005 build tests and include in output
directory for CI to match platform with tests.</font>\
<font color="#000000">OS-1001 don't leave ip and nic\_tag undefined when
adding NIC without them.</font>\
<font color="#000000">OS-1000 Fix issues around updating / setting
primary flag on NICs and add tests and documentation.</font>\
<font color="#000000">OS-999 Fix setting memory parameters to make
setting bad values more difficult, add tests and better logging for such
changes.</font>\
<font color="#000000">OS-996 fix vmadm man page for qemu\_opts after
VNC/vga changes</font>\
<font color="#000000">OS-983 don't allow 'tags' or 'nics' as -o
parameters to vmadm list.</font>\
<font color="#000000">QA-99 bump to latest version of node-tap and new
dependencies.</font>\
<font color="#000000">OS-980 fix error handling around zones that
disappear between lookup and load.</font>

Feb 23, 2012
----------------

<font color="#000000">The list of changes in this release are:</font>

<font color="#000000">From illumos-joyent:</font>

<font color="#000000">OS-970 kpreemptpri should be lowered to
maxclsyspri</font>\
<font color="#000000">OS-975 stack overflow from squeue\_drain()</font>\
<font color="#000000">OS-948 add libdiskmgt spec as block
comment</font>\
<font color="#000000">OS-950 zonecfg should not barf when MAC address is
formatted with or without leading zeros</font>\
<font color="#000000">OS-928 cyclic processing fails when cy\_pend is
greater than INT32\_MAX</font>\
<font color="#000000">OS-887 cyclic\_remove\_here() blocked with
cyp\_rpend of UINT32\_MAX</font>\
<font color="#000000">OS-962 need to update copyright banner to
2012</font>\
<font color="#000000">manifest: Drop extra pages accidentally pruned
from 317f788</font>\
<font color="#000000">manifest: Don't deliver manual pages actually from
smartos-live</font>\
<font color="#000000">OS-946 IP DCE does not scale</font>

<font color="#000000">From smartos-live:</font>

<font color="#000000">OS-986 modify KVM zone startup to not need fork
and to dump zone privileges to the log.</font>\
<font color="#000000">OS-981 added info logging for all modification
actions, fixed problems with debug logging.</font>\
<font color="#000000">OS-984 fix error message when running 'vmadm info'
on non-KVM zones.</font>\
<font color="#000000">OS-977 Add support for disabling VNC, setting VNC
port, allowing VNC password, and changing VGA type. (Thanks Lee
Essen!)</font>\
<font color="#000000">OS-972 add documentation for nic\_tag option and
fix wording around quota.</font>\
<font color="#000000">OS-952 add jsstyle, jsl, 'make check' target and
update VM.js/qmp.js and vmadm(d).js to pass checks.</font>\
<font color="#000000">HEAD-952 fix problems where octets were coming out
all zeros.</font>\
<font color="#000000">OS-965 gcc44 should be pulled down
automatically</font>\
<font color="#000000">OS-959 fix VM.js handling of 00 MAC octets</font>\
<font color="#000000">OS-960 /etc/system setting to disable
c-states</font>\
<font color="#000000">AGENT-437 fix metadata startup to not depend on
disks since we can't count on sdc-init (see AGENT-436)</font>\
<font color="#000000">AGENT-436: Metadata daemon should not depend on
system/smartdc/init</font>\
<font color="#000000">OS-913: Fix typo in Makefile node-zsock
target</font>\
<font color="#000000">OS-913: Add metadata agent to illumos-live</font>\
<font color="#000000">STOR-73 tool which reports disk vendor and
product</font>\
<font color="#000000">QA-96 add test dir to platform to make it easier
to just drop in tests.</font>

<font color="#000000">kvm & kvm-cmd are unchanged</font>

February 10, 2012
---------------------

<font color="#000000">Mostly bug fixes, though we've included the
COMSTAR iSCSI target bits, better errors for env, proc fixes for large
memory systems, fs\_allowed setable through vmadm and wall(1) -z and -Z
to send all user messages to zones on behalf of the global.</font>

Earlier
-----------

Changes since 20120113:

- node 0.6

Changes since 20111219:

- [v8/node.js mdb
    providers](http://dtrace.org/blogs/dap/2012/01/13/playing-with-nodev
8-postmortem-debugging/)
- ability to hand vmadm ethernet device names rather than tags
- etherstub persistence via the config file

Changes since 20111215:

- fixed an unfortunate bug in vmadm
- NICs can now be specified by device name rather than tag

Major changes since 20110926:

- create-machine replaced
    with [**vmadm**](Using%20vmadm%20to%20manage%20virtual%20machines.ht
ml "Using vmadm to manage virtual machines")

Major changes since 20110813:

- Persistent setup on boot: creates a zpool and datasets for /var,
    /etc/zones, /etc/ssh, /zones
- ~~/usr/sbin/create-machine : allows you to define & install a vm or
    zone via a json file, greatly simplifying use of the joyent
    brand~~ (replaced with vmadm create)
- vmadm : simplified vm management utility allowing better control &
    interrogation of vms (documentation coming, but invoked without
    options will give usage)
- networking persistence : define it once ( via the dataset setup ),
    next reboot it's there
- ssh host key persistence : no more errors from ssh
- zone persistence
- root's password can now be changed from the default of 'root'

Notes:

- Users created on the global zone do NOT persist across reboots.
    Create zones for your nonroot users and applications
- If root's password changes, you must copy /etc/shadow to
    /usbkey/shadow and chmod it 0400. This is not done automatically
- If you wish to have the previous SmartOS behavior and bypass the
    dataset setup, there is a GRUB option to do so (second option
    on boot). Otherwise setup will run and cannot be exited.
- post-install changes to network configuration are done via
    /usbkey/config
- Using partitions for your data is not currently easily supported,
    you must use whole disks
+--------------------------------------------------------------------------+

  ----------------------------------------------------------------------------------
  ![](images/border/spacer.gif){width="1" height="1"}
  <font color="grey">Document generated by Confluence on Jul 07, 2019 00:15</font>
  ----------------------------------------------------------------------------------


